(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[5],{103:function(e,t,c){"use strict";c.r(t),c.d(t,"DocumentsList",(function(){return X}));var n=c(99),s=c(35),r=c(36),o=c(37),a=c(38),i=c(2),d=c.n(i),l=c(15),u=c(6),m=c(5),j=c(33),b=c(1),x=function(e){var t=Object(i.useState)(!0),c=Object(j.a)(t,2),n=c[0],s=c[1],r=Object(i.useState)(null),o=Object(j.a)(r,2),a=o[0],d=o[1];return Object(i.useEffect)((function(){var t;n&&(null===(t=e.file_url)||null!==t.match(/^ *$/)?d({element:"PDF_FILE",msg:"File url is required"}):null!==a&&d(null),s(!1))}),[a,n,e.file_url]),Object(b.jsx)("div",{className:"w-full",children:a?Object(b.jsx)("div",{className:"alert-warning mt-2 mx-14",children:a.msg}):Object(b.jsx)("object",{data:e.file_url,type:"application/pdf",className:e.class_name,onLoad:function(){return e.setLoadingFile(!1)},children:Object(b.jsx)("iframe",{src:e.file_url,className:e.class_name,title:e.frame_title,onLoad:function(){return e.setLoadingFile(!1)},children:Object(b.jsx)("p",{children:"This browser does not support PDF!"})})})})},h=c(7),_=c(94),v=c(24),p=function(e){var t=e.close,c=e.document_code;return Object(b.jsxs)("div",{className:"flex px-2 items-center border-b h-12",children:[Object(b.jsx)("div",{className:"flex-1",children:""!==c&&Object(b.jsxs)("h2",{className:"text-xl",children:[Object(b.jsx)("b",{className:"text-blue-700",children:c})," ",Object(b.jsx)("span",{className:"text-gray-400",children:"D\xe9tails du document"})]})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(v.a,{size:"sm",theme:"danger-light",onClick:t,children:"fermer"})})]})},g=c(39),O=function(){return Object(b.jsx)("div",{className:"flex items-center",children:Object(b.jsxs)("div",{className:"mx-auto py-28 text-center",children:[Object(b.jsx)("div",{className:"block mx-auto pb-2",children:Object(b.jsx)(g.a,{textColor:"text-blue-600"})}),Object(b.jsx)("div",{className:"mt-2",children:"Chargement des d\xe9tails du document"})]})})},f=function(){return Object(b.jsx)("div",{className:"text-center text-white h-full flex items-center",children:Object(b.jsxs)("div",{className:"mx-auto",children:[Object(b.jsx)("div",{className:"block mx-auto pb-2 text-white",children:Object(b.jsx)(g.a,{textColor:"white"})}),"Chargement du document..."]})})},N=c(34),y=c(22),w=c(95),k=c(93),C=function(e){var t=e.onChange,c=e.value,n=e.error,s=e.label,r=e.placeholder,o=e.disabled,a=void 0!==o&&o,i=e.name,d=e.Input_className,l=void 0===d?"":d,u=e.Label_className,m=void 0===u?"":u,j=e.InputContainer_className,x=void 0===j?"":j,h=e.MainContainer_className,_=void 0===h?"":h,v=e.size,p=void 0===v?"md":v,g=e.data;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"w-full my-2 ".concat(_),children:[Object(b.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(m),children:s}),Object(b.jsxs)("div",{className:"rounded relative ".concat(x),children:[Object(b.jsx)("select",{name:i,placeholder:r,onChange:t,className:"\n                     w-full text-lg rounded border-2 \n                     ".concat(Object(k.a)(p),"\n                     ").concat(""!==n?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                     px-3 ").concat(l),value:c,disabled:a,children:g.map((function(e,t){return Object(b.jsx)("option",{value:e.value,children:e.title},t)}))}),""!==n&&Object(b.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:n})]})]})})},S=c(40),D=c(19),E=function(e){var t=e.loading,c=(e.id,e.title),n=e.close,s=e.data,r=e.click,o=Object(i.useState)(""),a=Object(j.a)(o,2),d=a[0],l=a[1],u=Object(_.c)(s,d,Object(S.a)({},c,!0));return Object(b.jsxs)("div",{className:" bg-gray-100 shadow-lg border-gray-500 border-2 h-64 rounded-md flex flex-col",children:[Object(b.jsxs)("div",{className:"p-1 bg-white rounded flex items-center",children:[Object(b.jsx)("label",{htmlFor:"search-input-data",children:Object(b.jsx)(D.l,{className:"text-2xl"})}),Object(b.jsx)("input",{type:"search",className:"py-1 px-1 flex-1",placeholder:"Search",value:d,id:"search-input-data",onChange:function(e){return l(e.target.value)}}),!1===t&&Object(b.jsx)("button",{onClick:function(){return n()},className:"px-2 py-0.5 rounded text-sm ml-3 bg-red-200 text-red-800",children:"Cancel"})]}),Object(b.jsx)("div",{className:"flex-1 p-2 overflow-y-auto border-t ",children:!0===t?Object(b.jsxs)("div",{className:"my-4",children:[Object(b.jsx)("div",{className:"mx-auto text-center",children:Object(b.jsx)(g.a,{})}),Object(b.jsx)("p",{className:"text-center text-gray-500",children:"Loading"})]}):Object(b.jsx)(i.Fragment,{children:0===u.length?Object(b.jsx)("section",{className:"p-4 text-center",children:Object(b.jsx)("h2",{className:"text-lg text-gray-400",children:"No results found"})}):u.map((function(e,t){return Object(b.jsx)("button",{onClick:function(){return r(e)},className:"block p-1 border-b w-full text-left border-gray-300 hover:text-white hover:bg-blue-600",type:"button",children:e[c]},t)}))})})]})},R=function(e){var t=e.onClick,c=e.value,n=e.error,s=e.label,r=e.placeholder,o=e.Input_className,a=void 0===o?"":o,i=e.Label_className,d=void 0===i?"":i,l=e.InputContainer_className,u=void 0===l?"":l,m=e.MainContainer_className,j=void 0===m?"":m,x=e.size,h=void 0===x?"md":x;e.max;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"w-full  ".concat(j),children:[""!==s&&Object(b.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(d),children:s}),Object(b.jsxs)("div",{className:"rounded relative ".concat(u),children:[Object(b.jsx)("div",{placeholder:r,onClick:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(k.a)(h),"\n                ").concat(""!==n?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(a),children:c&&c}),""!==n&&Object(b.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:n})]})]})})},z=Object(l.b)((function(e){var t=e.auth;return{basic:e.basic,auth:t}}),{})((function(e){var t=e.close,c=e.domain_id,s=e.priority_id,r=e.basic,o=e.document_id,a=e.auth,d=e.updateRows,l=Object(i.useState)(c),m=Object(j.a)(l,2),x=m[0],h=m[1],_=Object(i.useState)(s),p=Object(j.a)(_,2),g=p[0],O=p[1],f=Object(i.useState)(!1),N=Object(j.a)(f,2),y=N[0],k=N[1],S=Object(i.useState)(!1),D=Object(j.a)(S,2),z=D[0],M=D[1],F=Object(i.useState)({target:null,msg:""}),L=Object(j.a)(F,2),T=L[0],I=L[1],A=r.domains.find((function(e){return e.domain_id===x}));return Object(b.jsx)(w.a,{title:"Add Domain and priority",close:t,children:Object(b.jsx)("form",{onSubmit:function(e){return e.preventDefault(),""===x||null===x||void 0===x?I({target:"domain",msg:"Le domaine est requis"}):""===g||null===g||void 0===g?I({target:"priority",msg:"La cat\xe9gorie est obligatoire"}):void(null!==a.user&&(k(!0),Object(u.k)({document_id:o,domain_id:x,priority_id:g,cecat_view:"1",cecat_id:a.user.user_id},(function(e,c,n){!0===e&&null!==c?(d(c),t()):I({target:"main-failed",msg:n}),k(!1),setTimeout((function(){I({target:null,msg:""})}),3e3)}))))},children:Object(b.jsxs)("div",{className:"p-4",children:[Object(b.jsx)("div",{className:"px-2 py-2",children:!1===z?Object(b.jsx)("div",{className:"",children:Object(b.jsx)(R,{onClick:function(){return M(!0)},value:null===A||void 0===A?void 0:A.domain_name,error:"domain"===T.target?T.msg:"",label:"S\xe9lectionnez le domaine",placeholder:"S\xe9lectionnez le domaine"})}):Object(b.jsx)(E,{click:function(e){h(e.domain_id),M(!1)},close:M.bind(undefined,!1),loading:y,data:[{title:"",value:""}].concat(Object(n.a)(r.domains)),id:"domain_id",title:"domain_name"})}),Object(b.jsxs)("div",{className:"px-2 py-2",children:[Object(b.jsx)(C,{onChange:function(e){return O(e.target.value)},value:g+"",error:"priority"===T.target?T.msg:"",label:"S\xe9lectionnez la priorit\xe9",placeholder:"S\xe9lectionnez la priorit\xe9",name:"",data:[{title:"",value:""}].concat(Object(n.a)(r.priorities.map((function(e){return{title:e.title,value:e.id}})))),disabled:y}),Object(b.jsx)("div",{className:"py-2 text-right",children:Object(b.jsx)(v.a,{loading:y,children:"Mettre \xe0 jour le document"})})]})]})})})})),M=Object(l.b)((function(e){var t=e.auth;return{basic:e.basic,auth:t}}),{})((function(e){var t=e.data,c=e.title,n=e.updateRows,s=e.setError,r=e.confirm,o=e.danger,a=Object(i.useState)(!1),d=Object(j.a)(a,2),l=d[0],m=d[1],x=function(){m(!0),Object(u.k)(t,(function(e,t,c){!0===e&&null!==t?(n(t),s({target:"main-success",msg:c})):s({target:"main-error",msg:c}),m(!1),setTimeout((function(){s({target:null,msg:""})}),3e3)}))};return Object(b.jsx)("div",{className:"my-1.5",children:Object(b.jsx)(v.a,{loading:l,onClick:function(){(void 0===r||window.confirm(r))&&x()},theme:o?"danger-light":"success-light",className:"w-full",children:c})})})),F=function(e){var t=e.close,c=e.user,n=e.comment,s=e.date,r=e.title;return Object(b.jsx)(w.a,{title:r,close:t,children:Object(b.jsxs)("div",{className:"",children:[null!==c&&Object(b.jsxs)("div",{className:"px-3 py-2 border-b flex items-center",children:[Object(b.jsx)("div",{className:"p-1",children:Object(b.jsx)(D.a,{className:"text-6xl text-gray-600"})}),Object(b.jsxs)("div",{className:"flex-1 pl-2",children:[Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{className:"text-gray-400",children:"Des noms: "}),Object(b.jsxs)("b",{className:"font-bold text-lg m-0 ",children:[c.first_name," ",c.middle_name," ",c.last_name]})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{className:"text-gray-400",children:"E-mail: "}),Object(b.jsxs)("b",{className:"font-bold ",children:[" ",c.email]})]})]})]}),Object(b.jsxs)("div",{className:"py-3 px-4",children:[Object(b.jsx)("label",{htmlFor:"",className:"mb-2 text-gray-500",children:"Commenter:"}),Object(b.jsx)("p",{children:n})]}),Object(b.jsxs)("div",{className:"py-2 border-t text-center text-gray-500 bg-white rounded-b-lg",children:["date comment\xe9e: ",Object(b.jsx)("b",{children:Object(_.a)(s)})]})]})})},L=Object(l.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})((function(e){var t=e.auth,c=e.close,n=e.title,s=e.comment,r=e.basic,o=e.access,a=e.domain_name,d=e.comment_key,l=e.date_key,m=e.date,x=e.access_key,h=e.document_id,_=e.user_id_key,p=e.updateRows,g=Object(i.useState)(null===o?"":o),O=Object(j.a)(g,2),f=O[0],y=O[1],k=Object(i.useState)(null===s?"":s),C=Object(j.a)(k,2),E=C[0],R=C[1],z=Object(i.useState)({target:null,msg:""}),M=Object(j.a)(z,2),F=M[0],L=M[1],T=Object(i.useState)(!1),I=Object(j.a)(T,2),A=I[0],Y=I[1];Object(i.useEffect)((function(){if(null===o){var e=r.roles.map((function(e){return e.constant}));y(e.toString()),console.log(e.toString())}}),[r.roles,o]);var G=function(e){L({msg:"",target:null}),f.indexOf(e)>=0?y(f.replace(e," ")):y(f+" ".concat(e," "))};return Object(b.jsx)(w.a,{title:n,close:A?function(){}:c,children:Object(b.jsx)("form",{onSubmit:function(e){var c,n;if(e.preventDefault(),""===s)return L({target:"comment",msg:"Le commentaire ne doit pas \xeatre vide"});if(f.length<=1)return L({target:"view-list",msg:"Veuillez s\xe9lectionner un utilisateur qui peut voir votre commentaire"});if(null===t.user)return L({target:"main-error",msg:"Aucun acc\xe8s trouv\xe9"});var r=(n={document_id:h},Object(S.a)(n,d,E),Object(S.a)(n,x,f),Object(S.a)(n,_,null===(c=t.user)||void 0===c?void 0:c.user_id),n);null===m&&null!==l&&(r[l]=(new Date).toISOString()),Y(!0),Object(u.k)(r,(function(e,t,c){!0===e&&null!==t?(p(t),L({target:"main-success",msg:"Le commentaire a \xe9t\xe9 mis \xe0 jour avec succ\xe8s"})):L({target:"main-error",msg:c}),Y(!1),setTimeout((function(){L({target:null,msg:""})}),3e3)}))},children:Object(b.jsxs)("div",{className:"",children:["main-error"===F.target&&Object(b.jsx)(N.a,{theme:"danger",children:F.msg}),"main-success"===F.target&&Object(b.jsx)(N.a,{theme:"success",children:F.msg}),Object(b.jsxs)("div",{className:"p-2",children:[Object(b.jsx)("label",{htmlFor:"comment-item",className:"mb-2 text-gray-500",children:"Ajouter un commentaire:"}),Object(b.jsx)("textarea",{onChange:function(e){R(e.target.value),L({msg:"",target:null})},value:E,className:"py-3 px-2 w-full rounded border-2 ".concat("comment"===F.target?"border-red-400":""),disabled:A,id:"comment-item",cols:30,rows:5}),"comment"===F.target&&Object(b.jsx)("span",{className:"text-danger text-sm",children:F.msg})]}),Object(b.jsxs)("div",{className:"border-t",children:[Object(b.jsxs)("div",{className:"px-2 text-center pt-3",children:[Object(b.jsx)("h3",{className:"font-bold text-lg",children:"Choisissez qui peut voir votre commentaire"}),Object(b.jsx)("p",{className:"text-sm text-gray-500 pb-1",children:"Cliquez sur l'ic\xf4ne de l'utilisateur pour s\xe9lectionner et d\xe9s\xe9lectionner"}),"view-list"===F.target&&Object(b.jsx)(N.a,{theme:"success",children:F.msg})]}),Object(b.jsx)("div",{className:"p-2 grid grid-cols-2 gap-2",children:r.roles.filter((function(e){var c;return e.constant!==(null===(c=t.selected_access)||void 0===c?void 0:c.constant)})).map((function(e,t){var c=f.indexOf(e.constant)>=0;return Object(b.jsxs)("div",{className:" rounded shadow ".concat(c?" bg-blue-50 text-blue-700 border border-blue-400":"bg-white"," p-0.5 flex items-center cursor-pointer"),onClick:G.bind(undefined,e.constant),children:[Object(b.jsx)("div",{className:"",children:Object(b.jsx)(D.a,{className:"text-3xl opacity-90"})}),Object(b.jsx)("div",{className:"flex-1 pl-2",children:Object(b.jsx)("h4",{className:"font-bold",children:e.role_name})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)("h6",{className:"opacity-60 text-sm px-2",children:a})}),Object(b.jsx)("div",{className:"pr-1",children:c?Object(b.jsx)(D.b,{className:"text-2xl text-blue-600"}):Object(b.jsx)(D.c,{className:"text-2xl text-gray-600"})})]},t)}))})]}),Object(b.jsx)("div",{className:"p-2 border-t text-right text-gray-500 bg-white rounded-b-lg",children:Object(b.jsx)(v.a,{loading:A,children:"Mettre \xe0 jour le commentaire"})})]})})})})),T=c(52),I=c(100),A=function(e){var t=e.OnClick,c=e.user,n=e.comment,s=e.date,r=e.title;return Object(b.jsxs)("div",{onClick:t,className:"mb-2 border rounded hover:border-4 hover:bg-blue-50 hover:border hover:border-blue-200",children:[Object(b.jsxs)("div",{className:"py-1  flex items-center bg-gray-100 border-b px-2",children:[Object(b.jsx)(I.a,{className:"text-3xl mx-auto text-yellow-500"}),Object(b.jsxs)("div",{className:"text-left flex-1 pl-2",children:[Object(b.jsx)("span",{className:"text-sm text-gray-800",children:r}),c&&Object(b.jsxs)("h6",{className:"text-blue-700 font-bold text-sm -mt-1",children:[null===c||void 0===c?void 0:c.first_name," ",null===c||void 0===c?void 0:c.middle_name," ",null===c||void 0===c?void 0:c.last_name]})]})]}),Object(b.jsx)("p",{className:"p-2",children:n&&n}),Object(b.jsxs)("span",{className:"block text-center p-1 text-gray-700  font-light text-xs",children:[Object(_.a)(s)," - ",Object(_.b)(s)]})]})},Y=function(e){Object(o.a)(c,e);var t=Object(a.a)(c);function c(e){var n;return Object(s.a)(this,c),(n=t.call(this,e)).updateRows=function(e){null!==n.state.document&&(n.setState({document:{document:e,users:n.state.document.users,reference_document:n.state.document.reference_document},error:{target:"main-success",msg:"Document updated successfully"}}),n.clearErrors()),n.props.updateRows(e)},n.updateDocument=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(u.k)(Object(m.a)({document_id:n.props.document_id},e),(function(e,c,s){!0===e&&null!==c?null!==n.state.document&&n.setState({document:{users:n.state.document.users,document:c,reference_document:n.state.document.reference_document},error:{target:!0===t?"main-success":null,msg:!0===t?"Document mis \xe0 jour avec succ\xe8s":""}}):n.setState({error:{msg:s,target:"main-error"}})}))},n.clearErrors=function(){return setTimeout((function(){n.setState({error:{target:null,msg:""}})}),3e3)},n.state={loading:!0,loading_document:!0,error:{target:null,msg:""},document:null,open_add_domain_and_priority:!1,governor_comment_open:!1,expert_comment_open:!1,director_comment_open:!1,ministor_open:!1,ministor_comment_open:!1,governor_comment_edit:!1,expert_comment_edit:!1,director_comment_edit:!1,ministor_edit:!1,ministor_comment_edit:!1,open_document_reference:!1},n}return Object(r.a)(c,[{key:"componentDidMount",value:function(){var e=this;Object(u.e)(this.props.document_id,(function(t,c,n){!0===t&&null!==c?(e.setState({loading:!1,document:c}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===T.a.CECAT&&null===c.document.cecat_view_date&&e.updateDocument({cecat_view_date:new Date,cecat_view:"1"}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===T.a.EXPEDITION&&null===c.document.expeditor_view_date&&e.updateDocument({expeditor_view_date:new Date,expeditor_view:"1"}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===T.a.EXPERT&&null===c.document.expert_view_date&&e.updateDocument({expert_view_date:new Date,expert_view:"1"}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===T.a.GOVENEUR&&null===c.document.governor_view_date&&e.updateDocument({governor_view_date:new Date,governor_view:"1"}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===T.a.MINISTOR&&null===c.document.minister_view_date&&e.updateDocument({minister_view_date:new Date,minister_view:"1"}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===T.a.DIRECTOR&&null===c.document.director_view_date&&e.updateDocument({director_view_date:new Date,director_view:"1"})):(e.setState({loading:!1,error:{target:"main-error",msg:n}}),e.clearErrors())}))}},{key:"render",value:function(){var e,t,c,n,s,r,o,a,i,d,l,u,m,j,g,k,C,S,E,R,I,Y,G,P,V,q,U,X,J=this,H=this.state.document,$="",B="";null!==H&&(null!==H.document.domain_id&&($=null===(U=this.props.basic.domains.find((function(e){return e.domain_id===(null===H||void 0===H?void 0:H.document.domain_id)})))||void 0===U?void 0:U.domain_name),null!==H.document.priority_id&&(B=null===(X=this.props.basic.priorities.find((function(e){return e.id+""===(null===H||void 0===H?void 0:H.document.priority_id)+""})))||void 0===X?void 0:X.title));return Object(b.jsxs)(b.Fragment,{children:["main-success"===this.state.error.target&&Object(b.jsx)(N.a,{theme:"success",fixed:!0,children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(b.jsx)(N.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),Object(b.jsxs)("div",{className:"fixed top-0 right-0 left-0 bottom-0 z-50 bg-white animate__animated animate__zoomIn animate__faster",children:[Object(b.jsx)(p,{close:this.props.close,document_code:null===H?"":H.document.document_code}),!0===this.state.loading?Object(b.jsx)(O,{}):Object(b.jsxs)("div",{className:" flex bg-white lg:flex-row-reverse flex-col ",children:[null!==this.state.document&&Object(b.jsxs)("div",{className:"lg:w-2/6  lg:overflow-y-auto height-calculated",children:[null!==this.state.document.document.governor_signed&&1===+this.state.document.document.governor_signed&&Object(b.jsxs)("div",{className:"flex items-center p-1 mt-1 rounded bg-green-500 text-white mx-3",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.d,{className:"text-3xl"})}),Object(b.jsx)("div",{className:"flex-1",children:"Ce document est approuv\xe9 par le gouverneur"})]}),Object(b.jsxs)("div",{className:"p-5 border-b",children:[console.log([{title:"Code du document",value:null===H||void 0===H?void 0:H.document.document_code},{title:"Nom du propri\xe9taire du document",value:null===H||void 0===H?void 0:H.document.owner_name},{title:"E-mail du propri\xe9taire du document",value:null===H||void 0===H?void 0:H.document.owner_email},{title:"T\xe9l\xe9phone du propri\xe9taire du document",value:null===H||void 0===H?void 0:H.document.owner_phone},{title:"Institution",value:null===H||void 0===H?void 0:H.document.owner_institute},{title:"Date d'enregistrement",value:Object(_.a)(null===H||void 0===H?void 0:H.document.registered_date)}]),[{title:"Code du document",value:null===H||void 0===H?void 0:H.document.document_code},{title:"Nom du propri\xe9taire du document",value:null===H||void 0===H?void 0:H.document.owner_name},{title:"E-mail du propri\xe9taire du document",value:null===H||void 0===H?void 0:H.document.owner_email},{title:"T\xe9l\xe9phone du propri\xe9taire du document",value:null===H||void 0===H?void 0:H.document.owner_phone},{title:"Institution",value:null===H||void 0===H?void 0:H.document.owner_institute},{title:"Date d'enregistrement",value:Object(_.a)(null===H||void 0===H?void 0:H.document.registered_date)}].map((function(e,t){var c;return null!==e.value&&void 0!==e.value&&(null===(c=e.value)||void 0===c?void 0:c.length)>=2?Object(b.jsxs)("div",{className:"py-1 border-b border-gray-100 hover:bg-gray-100",children:[Object(b.jsxs)("span",{className:"text-gray-500 block text-sm",children:[e.title,":"]})," ",Object(b.jsx)("b",{children:e.value})]},t):null})),null!==this.state.document.reference_document&&Object(b.jsxs)("button",{className:"p-1 items-center border flex mt-2 w-full rounded bg-blue-100 text-blue-800 hover:bg-blue-200",onClick:function(){return J.setState({open_document_reference:!0})},children:[Object(b.jsx)("div",{className:"pr-1",children:Object(b.jsx)(y.c,{className:"text-4xl"})}),Object(b.jsx)("div",{className:"flex-1 text-left",children:Object(b.jsxs)("p",{children:["Ce document est associ\xe9 \xe0 un autre document"," ",Object(b.jsx)("b",{children:this.state.document.reference_document.document_code})," "]})})]})]}),Object(b.jsxs)("div",{className:"p-5 border-b",children:[$&&Object(b.jsxs)("div",{className:"py-1 border-b border-gray-100 flex items-center group",children:[Object(b.jsxs)("div",{className:"flex-1",children:[Object(b.jsx)("span",{className:"text-gray-500",children:"Domain:"})," ",Object(b.jsx)("b",{children:$})]}),Object(b.jsx)("div",{className:"",children:(null===(e=this.props.auth.selected_access)||void 0===e?void 0:e.constant)===T.a.CECAT&&Object(b.jsx)("button",{className:"text-xs py-1 px-2 group-hover:bg-blue-200 rounded bg-blue-50 text-blue-700",onClick:function(){return J.setState({open_add_domain_and_priority:!0})},children:"Modifier"})})]}),B&&Object(b.jsxs)("div",{className:"py-1 border-gray-100 flex items-center group",children:[Object(b.jsxs)("div",{className:"flex-1",children:[Object(b.jsx)("span",{className:"text-gray-500",children:"Priority:"})," ",Object(b.jsx)("b",{children:B})]}),Object(b.jsx)("div",{className:"",children:(null===(t=this.props.auth.selected_access)||void 0===t?void 0:t.constant)===T.a.CECAT&&Object(b.jsx)("button",{className:"text-xs py-1 px-2 group-hover:bg-blue-200 rounded bg-blue-50 text-blue-700",onClick:function(){return J.setState({open_add_domain_and_priority:!0})},children:"Modifier"})})]}),null!==H&&(null===H.document.domain_id||null===H.document.priority_id)&&Object(b.jsxs)("div",{className:"group my-2 p-2 bg-blue-50 hover:bg-blue-100 border-blue-100 rounded-lg border-2 text-center",children:[Object(b.jsx)(y.f,{className:"text-6xl mx-auto"}),Object(b.jsx)("p",{className:"mt-1 mb-2 font-bold",children:"Ajouter un domaine et une priorit\xe9"}),Object(b.jsx)(v.a,{theme:"accent-light",className:"border-2 border-blue-500 group-hover:bg-blue-600 group-hover:text-white ",size:"sm",onClick:function(){return J.setState({open_add_domain_and_priority:!0})},children:"Mettre \xe0 jour le document"})]})]}),Object(b.jsxs)("div",{className:"border-b p-5",children:[(null!==this.state.document.document.expert_comment||null!==this.state.document.document.director_comment||null!==this.state.document.document.governor_comment||null!==this.state.document.document.minister_comment)&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{className:"font-bold",children:"Commentaires"}),Object(b.jsxs)("div",{className:"py-2  grid ",children:[null!==this.state.document.document.governor_comment&&null!==this.state.document.document.governor_comment_access&&this.state.document.document.governor_comment_access.indexOf((null===(c=this.props.auth.selected_access)||void 0===c?void 0:c.constant)+"")>=0&&Object(b.jsx)(A,{OnClick:function(){return J.setState({governor_comment_open:!0})},user:null===H||void 0===H?void 0:H.users.govenor,comment:null===H||void 0===H?void 0:H.document.governor_comment,date:null===H||void 0===H?void 0:H.document.governor_comment_date,title:"Commentaire du gouverneur"}),null!==this.state.document.document.director_comment&&null!==this.state.document.document.director_comment_access&&this.state.document.document.director_comment_access.indexOf((null===(n=this.props.auth.selected_access)||void 0===n?void 0:n.constant)+"")>=0&&Object(b.jsx)(A,{OnClick:function(){return J.setState({director_comment_open:!0})},user:null===H||void 0===H?void 0:H.users.director,comment:null===H||void 0===H?void 0:H.document.director_comment,date:null===H||void 0===H?void 0:H.document.director_comment_date,title:"Commentaire de durecteur"}),null!==this.state.document.document.minister_comment&&null!==this.state.document.document.ministor_comment_access&&this.state.document.document.ministor_comment_access.indexOf((null===(s=this.props.auth.selected_access)||void 0===s?void 0:s.constant)+"")>=0&&Object(b.jsx)(A,{OnClick:function(){return J.setState({ministor_comment_edit:!0})},user:null===H||void 0===H?void 0:H.users.minister,comment:null===H||void 0===H?void 0:H.document.minister_comment,date:null===H||void 0===H?void 0:H.document.ministor_comment_date,title:"Commentaire du ministre"}),null!==this.state.document.document.expert_comment&&null!==this.state.document.document.expert_comment_access&&this.state.document.document.expert_comment_access.indexOf((null===(r=this.props.auth.selected_access)||void 0===r?void 0:r.constant)+"")>=0&&Object(b.jsx)(A,{OnClick:function(){return J.setState({expert_comment_open:!0})},user:null===H||void 0===H?void 0:H.users.expert,comment:null===H||void 0===H?void 0:H.document.expert_comment,date:null===H||void 0===H?void 0:H.document.expert_comment_date,title:"Commentaire d'expert"})]})]}),Object(b.jsxs)("div",{className:"p",children:[(null===(o=this.props.auth.selected_access)||void 0===o?void 0:o.constant)===T.a.GOVENEUR&&Object(b.jsxs)(v.a,{theme:"accent-light",full:!0,onClick:function(){return J.setState({governor_comment_edit:!0})},children:[Object(b.jsx)(D.e,{className:"inline-block pr-2 text-2xl"}),null===this.state.document.document.governor_comment?"Ajoutez votre commentaire (Gouverneur)":"Modifier votre commentaire (Gouverneur)"]}),(null===(a=this.props.auth.selected_access)||void 0===a?void 0:a.constant)===T.a.DIRECTOR&&Object(b.jsxs)(v.a,{theme:"accent-light",full:!0,onClick:function(){return J.setState({director_comment_edit:!0})},children:[Object(b.jsx)(D.e,{className:"inline-block pr-2 text-2xl"}),null===this.state.document.document.governor_comment?"Ajoutez votre commentaire (Directeur)":"Modifier votre commentaire (Directeur)"]}),(null===(i=this.props.auth.selected_access)||void 0===i?void 0:i.constant)===T.a.MINISTOR&&Object(b.jsxs)(v.a,{theme:"accent-light",full:!0,onClick:function(){return J.setState({ministor_comment_edit:!0})},children:[Object(b.jsx)(D.e,{className:"inline-block pr-2 text-2xl"}),null===this.state.document.document.governor_comment?"Ajoutez votre commentaire (Ministre)":"Modifier votre commentaire (Ministre)"]}),(null===(d=this.props.auth.selected_access)||void 0===d?void 0:d.constant)===T.a.EXPERT&&Object(b.jsxs)(v.a,{theme:"accent-light",full:!0,onClick:function(){return J.setState({expert_comment_edit:!0})},children:[Object(b.jsx)(D.e,{className:"inline-block pr-2 text-2xl"}),null===this.state.document.document.governor_comment?"Ajoutez votre commentaire (Expert)":"Modifier votre commentaire (Expert)"]})]})]}),Object(b.jsx)("div",{className:"p-5 border-b",children:Object(b.jsxs)("div",{className:"py-2",children:[(null===(l=this.props.auth.selected_access)||void 0===l?void 0:l.constant)===T.a.CECAT&&Object(b.jsx)(b.Fragment,{children:0===this.state.document.document.director_access?Object(b.jsx)(M,{setError:function(e){return J.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,director_access:"1"},title:"Envoyer le document au directeur"}):null!==(null===(u=this.state.document)||void 0===u||null===(m=u.document)||void 0===m?void 0:m.director_view)?Object(b.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.i,{className:"text-2xl text-green-500"})}),Object(b.jsx)("div",{className:"flex-1",children:"Le directeur a re\xe7u le document"})]}):Object(b.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.h,{className:"text-2xl text-green-500"})}),Object(b.jsx)("div",{className:"flex-1",children:"Le document a \xe9t\xe9 envoy\xe9 au directeur"})]})}),(null===(j=this.props.auth.selected_access)||void 0===j?void 0:j.constant)===T.a.DIRECTOR&&Object(b.jsx)(b.Fragment,{children:0===this.state.document.document.governor_access?Object(b.jsx)(M,{setError:function(e){return J.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,governor_access:"1"},title:"Envoyer le document au gouverneur"}):null!==(null===(g=this.state.document)||void 0===g||null===(k=g.document)||void 0===k?void 0:k.governor_view)?Object(b.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.i,{className:"text-2xl text-green-500"})}),Object(b.jsx)("div",{className:"flex-1",children:"Le gouverneur a re\xe7u le document"})]}):Object(b.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.h,{className:"text-2xl text-green-500"})}),Object(b.jsx)("div",{className:"flex-1",children:"Le document a \xe9t\xe9 envoy\xe9 au gouverneur"})]})}),(null===(C=this.props.auth.selected_access)||void 0===C?void 0:C.constant)===T.a.GOVENEUR&&Object(b.jsxs)(b.Fragment,{children:[0===this.state.document.document.governor_access?Object(b.jsx)(M,{setError:function(e){return J.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,ministor_access:"1"},title:"Envoyer le document au ministre (".concat($,")")}):null!==(null===(S=this.state.document)||void 0===S||null===(E=S.document)||void 0===E?void 0:E.minister_view)?Object(b.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.i,{className:"text-2xl text-green-500"})}),Object(b.jsx)("div",{className:"flex-1",children:"Le ministre a re\xe7u le document"})]}):Object(b.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.h,{className:"text-2xl text-green-500"})}),Object(b.jsx)("div",{className:"flex-1",children:"Le document a \xe9t\xe9 envoy\xe9 au ministre"})]}),0===this.state.document.document.expert_access?Object(b.jsx)(M,{setError:function(e){return J.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,expert_access:"1"},title:"Envoyer le document aux experts (".concat($,")")}):null!==(null===(R=this.state.document)||void 0===R||null===(I=R.document)||void 0===I?void 0:I.expeditor_view)?Object(b.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.i,{className:"text-2xl text-green-500"})}),Object(b.jsx)("div",{className:"flex-1",children:"Les experts ont re\xe7u le document"})]}):Object(b.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.h,{className:"text-2xl text-green-500"})}),Object(b.jsx)("div",{className:"flex-1",children:"Le document a \xe9t\xe9 envoy\xe9 aux experts"})]}),0===this.state.document.document.expeditor_access?Object(b.jsx)(M,{setError:function(e){return J.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,expeditor_access:"1"},title:"Envoyer le document aux exp\xe9diteurs "}):null!==(null===(Y=this.state.document)||void 0===Y||null===(G=Y.document)||void 0===G?void 0:G.expeditor_view)?Object(b.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.i,{className:"text-2xl text-green-500"})}),Object(b.jsx)("div",{className:"flex-1",children:"Les exp\xe9diteurs ont re\xe7u le document"})]}):Object(b.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(b.jsx)("div",{className:"pr-2",children:Object(b.jsx)(D.h,{className:"text-2xl text-green-500"})}),Object(b.jsx)("div",{className:"flex-1",children:"le document a \xe9t\xe9 envoy\xe9 aux exp\xe9diteurs"})]}),(null===(P=this.props.auth.selected_access)||void 0===P?void 0:P.constant)===T.a.GOVENEUR&&null!==this.state.document.document.governor_signed&&1!==+this.state.document.document.governor_signed?Object(b.jsx)(M,{setError:function(e){return J.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,governor_signed:"1"},title:"Approuver le document",confirm:"Voulez-vous vraiment approuver ce document ?"}):Object(b.jsx)("div",{className:"p-2 bg-gray-100 text-green text-center border-b",children:"La lettre est approuv\xe9e par le gouverneur"}),null!==this.state.document.document.to_print&&1!==+this.state.document.document.to_print?Object(b.jsx)(M,{setError:function(e){return J.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,to_print:"1"},title:"Envoyez cette lettre au service d'impression"}):Object(b.jsx)("div",{className:"p-2 rounded border-b bg-gray-100 text-center",children:"la lettre a \xe9t\xe9 envoy\xe9e au service d'impression"}),null!==this.state.document.document.closed&&1!==+this.state.document.document.closed?Object(b.jsx)(M,{setError:function(e){return J.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,closed:"1"},title:"Fermer le document",danger:!0}):Object(b.jsx)("div",{className:"p-2 text-center text-red-800 bg-red-100 rounded border-b",children:"The letter has been closed"})]})]})}),Object(b.jsxs)("div",{className:"border-b p-5",children:[Object(b.jsx)("h3",{className:"font-bold",children:"Contributrice/Contributeurs"}),Object(b.jsx)("div",{className:"y-2",children:Object(b.jsxs)("table",{className:"w-full border text-sm",children:[Object(b.jsx)("thead",{className:"text-left border",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"p-1 border",children:"R\xf4le"}),Object(b.jsx)("th",{className:"p-1 border",children:"Des noms"}),Object(b.jsx)("th",{className:"p-1 border",children:"Dates et heure"})]})}),Object(b.jsx)("tbody",{children:[{user:this.state.document.users.cecat,role:"CECAT",date:this.state.document.document.cecat_view_date},{user:this.state.document.users.director,role:"Director",date:this.state.document.document.director_view_date},{user:this.state.document.users.expeditor,role:"Expeditor",date:this.state.document.document.expeditor_view_date},{user:this.state.document.users.expert,role:"Expert",date:this.state.document.document.expert_view_date},{user:this.state.document.users.govenor,role:"Govenor",date:this.state.document.document.governor_view_date},{user:this.state.document.users.minister,role:"Ministor",date:this.state.document.document.minister_view_date}].map((function(e,t){return Object(b.jsxs)("tr",{className:"hover:bg-blue-100",children:[Object(b.jsx)("td",{className:"p-1 border",children:e.role}),Object(b.jsx)("td",{className:"p-1 border",children:e.user&&"".concat(e.user.first_name," ").concat(e.user.middle_name," ").concat(e.user.last_name)}),Object(b.jsxs)("td",{className:"p-1 border text-xs",children:[Object(_.a)(e.date)," - ",Object(_.b)(e.date)]})]},t)}))})]})})]})]}),Object(b.jsxs)("div",{className:"flex-1 bg-gray-800",children:[!0===this.state.loading_document&&Object(b.jsx)(f,{}),null!==H&&Object(b.jsx)(x,{file_url:"".concat(h.d,"/").concat(H.document.document_url),class_name:" w-full height-calculated ".concat(!0===this.state.loading_document?"opacity-0":"opacity-100"),frame_title:"D\xe9tails du document",setLoadingFile:function(){return J.setState({loading_document:!1})}})]})]})]}),!0===this.state.open_add_domain_and_priority&&null!==this.state.document&&Object(b.jsx)(z,{close:function(){return J.setState({open_add_domain_and_priority:!1})},domain_id:null===(V=this.state.document)||void 0===V?void 0:V.document.domain_id,priority_id:null===(q=this.state.document)||void 0===q?void 0:q.document.priority_id,updateRows:this.updateRows,document_id:this.state.document.document.document_id}),!0===this.state.governor_comment_open&&null!==H&&H.document.governor_comment&&Object(b.jsx)(F,{close:function(){return J.setState({governor_comment_open:!1})},comment:H.document.governor_comment,date:H.document.governor_comment_date,title:"Commentaire du gouverneur",user:H.users.govenor}),!0===this.state.expert_comment_open&&null!==H&&H.document.governor_comment&&Object(b.jsx)(F,{close:function(){return J.setState({expert_comment_open:!1})},comment:H.document.expert_comment,date:H.document.expert_comment_date,title:"Commentaire de l'expert",user:H.users.expert}),!0===this.state.director_comment_open&&null!==H&&H.document.director_comment&&Object(b.jsx)(F,{close:function(){return J.setState({director_comment_open:!1})},comment:H.document.director_comment,date:H.document.director_comment_date,title:"Commentaire du r\xe9alisateur",user:H.users.director}),!0===this.state.ministor_comment_open&&null!==H&&H.document.minister_comment&&Object(b.jsx)(F,{close:function(){return J.setState({ministor_comment_open:!1})},comment:H.document.minister_comment,date:H.document.ministor_comment_date,title:"Commentaire du ministre",user:H.users.minister}),null!==H&&!0===this.state.governor_comment_edit&&null!==H&&Object(b.jsx)(L,{close:function(){return J.setState({governor_comment_edit:!1})},comment:H.document.governor_comment,title:"Commentaire du gouverneur",access:H.document.governor_comment_access,domain_name:$,comment_key:"governor_comment",access_key:"governor_comment_access",date_key:"governor_comment_date",date:H.document.governor_comment_date,updateRows:this.updateRows,document_id:H.document.document_id,user_id_key:"governor_id"}),null!==H&&!0===this.state.director_comment_edit&&null!==H&&Object(b.jsx)(L,{close:function(){return J.setState({director_comment_edit:!1})},comment:H.document.director_comment,title:"Commentaire du directeur",access:H.document.director_comment_access,domain_name:$,comment_key:"director_comment",access_key:"director_comment_access",date_key:"director_comment_date",date:H.document.director_comment_date,updateRows:this.updateRows,document_id:H.document.document_id,user_id_key:"director_id"}),null!==H&&!0===this.state.ministor_comment_edit&&null!==H&&Object(b.jsx)(L,{close:function(){return J.setState({ministor_comment_edit:!1})},comment:H.document.minister_comment,title:"Ministor du directeur",access:H.document.ministor_comment_access,domain_name:$,comment_key:"minister_comment",access_key:"ministor_comment_access",date_key:"ministor_comment_date",date:H.document.ministor_comment_date,updateRows:this.updateRows,document_id:H.document.document_id,user_id_key:"minister_id"}),null!==H&&!0===this.state.expert_comment_edit&&null!==H&&Object(b.jsx)(L,{close:function(){return J.setState({expert_comment_edit:!1})},comment:H.document.expert_comment,title:"Expert du directeur",access:H.document.expert_comment_access,domain_name:$,comment_key:"expert_comment",access_key:"expert_comment_access",date_key:"expert_comment_date",date:H.document.expert_comment_date,updateRows:this.updateRows,document_id:H.document.document_id,user_id_key:"expert_id"}),!0===this.state.open_document_reference&&null!==this.state.document&&null!==this.state.document.reference_document&&Object(b.jsxs)(w.a,{close:function(){return J.setState({open_document_reference:!1})},title:"Document de r\xe9f\xe9rence",children:[Object(b.jsx)("div",{className:"p-2 grid grid-cols-2 gap-2",children:[{title:"Des noms: ",value:this.state.document.reference_document.owner_name},{title:"Email: ",value:this.state.document.reference_document.owner_email},{title:"R\xe9f\xe9rence: ",value:this.state.document.reference_document.document_reference_code},{title:"Institut: ",value:this.state.document.reference_document.owner_institute},{title:"Date d'enregistrement: ",value:Object(_.a)(this.state.document.reference_document.registered_date)}].map((function(e,t){return console.log({val:e.value}),null===e.value||e.value.length<=2?null:Object(b.jsxs)("div",{className:"p-1 border rounded flex items-center",children:[Object(b.jsx)("label",{className:"text-sm text-gray-600",children:e.title}),Object(b.jsx)("h6",{className:"font-bold pl-2",children:e.value})]},t)}))}),Object(b.jsx)(x,{file_url:"".concat(h.d,"/").concat(this.state.document.reference_document.document_url),class_name:"w-full h-96",frame_title:"D\xe9tails du document",setLoadingFile:function(){}}),Object(b.jsx)("div",{className:"text-right p-2",children:Object(b.jsx)(v.a,{size:"sm",onClick:function(){null!==J.state.document&&null!==J.state.document.reference_document&&J.props.selectDocument(J.state.document.reference_document.document_id+"")},children:"Ouvrir le document"})})]})]})}}]),c}(d.a.Component),G=Object(l.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})(Y),P=c(41),V=c(98),q=c(96),U=function(e){Object(o.a)(c,e);var t=Object(a.a)(c);function c(e){var n;return Object(s.a)(this,c),(n=t.call(this,e)).clearErrors=function(){return setTimeout((function(){n.setState({error:{target:null,msg:""}})}),3e3)},n.closeModal=function(){return n.setState({selected_document_id:""})},n.updateRows=function(e){n.setState({documents:n.state.documents.map((function(t){return t.document_id===e.document_id?{closed:e.closed,document_code:e.document_code,document_id:e.document_id,document_reference_code:e.document_reference_code,document_url:e.document_url,domain_id:e.domain_id,owner_email:e.owner_email,owner_institute:e.owner_institute,owner_name:e.owner_name,owner_phone:e.owner_phone,priority_id:e.priority_id,registered_by_id:e.registered_by_id,registered_date:e.registered_date,status:e.status}:t}))})},n.selectDocument=function(e){return n.setState({selected_document_id:e})},n.selectDocumentTimer=function(e){console.log({id:e}),n.setState({selected_document_id:""}),setTimeout((function(){n.setState({selected_document_id:e})}),100)},n.state={loading:!1,selected_document_id:"",selected_user_to_role:"",documents:[],error:{target:null,msg:""},selected_category:"",search:"",selected_domain:""},n}return Object(r.a)(c,[{key:"componentDidMount",value:function(){this.getDocuments()}},{key:"getDocuments",value:function(){var e=this;if(null===this.props.auth.selected_access)return this.setState({loading:!1,error:{target:"main-error",msg:"Impossible de trouver le r\xf4le, veuillez r\xe9essayer plus tard"},selected_document_id:""});this.setState({loading:!0,error:{target:null,msg:""}});var t=this.props.auth.selected_access;Object(u.g)(t.constant,t.domain_id,(function(t,c,n){!0===t?e.setState({loading:!1,documents:c}):(e.setState({loading:!1,documents:[],error:{target:"main-error",msg:"\xc9chec du chargement des documents, veuillez r\xe9essayer plus tard"}}),e.clearErrors())}))}},{key:"componentDidUpdate",value:function(e){var t,c;(null===(t=e.auth.selected_access)||void 0===t?void 0:t.user_to_access_id)!==(null===(c=this.props.auth.selected_access)||void 0===c?void 0:c.user_to_access_id)&&this.getDocuments()}},{key:"render",value:function(){var e,t,c=this;if(""!==this.state.selected_document_id)return Object(b.jsx)(G,{document_id:this.state.selected_document_id,close:this.closeModal,updateRows:this.updateRows,selectDocument:this.selectDocumentTimer});var s=this.state.documents;return console.log({Results:s}),""!==this.state.selected_category&&(s=s.filter((function(e){return e.priority_id===c.state.selected_category}))),""!==this.state.selected_domain&&(s=s.filter((function(e){return e.domain_id===c.state.selected_domain}))),s=Object(_.c)(s,this.state.search,{document_code:!0,document_reference_code:!0,owner_email:!0,owner_name:!0,owner_phone:!0}),Object(b.jsxs)(P.a,{children:["main-error"===this.state.error.target&&Object(b.jsx)(N.a,{theme:"danger",children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(b.jsx)(N.a,{theme:"success",children:this.state.error.msg}),Object(b.jsx)(V.a,{children:"Documents"}),Object(b.jsxs)("div",{className:"flex items-center",children:[Object(b.jsx)("div",{className:"flex-1",children:Object(b.jsx)(q.a,{onChange:function(e){return c.setState({search:e.target.value})},value:this.state.search,error:"",label:"Recherche",size:"sm",placeholder:"Code du document, noms des propri\xe9taires,...",name:"Recherche",type:"search"})}),Object(b.jsx)("div",{className:"mx-2",children:Object(b.jsx)(C,{onChange:function(e){return c.setState({selected_category:e.target.value})},value:this.state.selected_category,error:"",label:"Cat\xe9gorie",placeholder:"",name:"",data:[{title:"Toute",value:""}].concat(Object(n.a)(this.props.basic.priorities.map((function(e){return{title:e.title,value:e.id}})))),size:"sm"})}),null!==this.props.auth.selected_access&&"1"===(null===(e=this.props.auth.selected_access)||void 0===e?void 0:e.domain_id)?Object(b.jsx)("div",{className:"mx-2",children:Object(b.jsx)(C,{onChange:function(e){return c.setState({selected_domain:e.target.value})},value:this.state.selected_domain,error:"",label:"Domaine",placeholder:"",name:"",data:[{title:"Toute",value:""}].concat(Object(n.a)(this.props.basic.domains.map((function(e){return{title:e.domain_name,value:e.domain_id}})))),size:"sm"})}):Object(b.jsx)("div",{className:"mx-2",children:Object(b.jsx)(q.a,{onChange:function(e){},value:(null===(t=this.props.auth.selected_access)||void 0===t?void 0:t.domain_name)+"",error:"",label:"Domaine",size:"sm",placeholder:"Domaine",name:"Domaine",disabled:!0})})]}),Object(b.jsx)("div",{className:"mt-2",children:Object(b.jsxs)("table",{className:"w-full text-left",children:[Object(b.jsx)("thead",{className:"bg-blue-200 rounded text-blue-800",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"p-2",children:"#"}),Object(b.jsx)("th",{className:"p-2",children:"Code"}),Object(b.jsx)("th",{className:"p-2",children:"Owner names"}),Object(b.jsx)("th",{className:"p-2",children:"Institution"}),Object(b.jsx)("th",{className:"p-2",children:"Domain"}),Object(b.jsx)("th",{className:"p-2",children:"Category"}),Object(b.jsx)("th",{className:"p-2",children:"Date et heure"})]})}),Object(b.jsx)("tbody",{children:!0===this.state.loading?Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:6,className:"py-8 text-center",children:Object(b.jsx)(g.a,{textColor:"text-blue-600"})})}):0===s.length?Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:6,className:"py-8 text-center",children:Object(b.jsx)(V.a,{className:"text-gray-400",children:"Aucun document trouv\xe9 trouv\xe9"})})}):s.map((function(e,t){var n=null===e.domain_id?void 0:c.props.basic.domains.find((function(t){return t.domain_id===e.domain_id})),s=null===e.priority_id?void 0:c.props.basic.priorities.find((function(t){return t.id+""===e.priority_id+""}));return Object(b.jsxs)("tr",{className:"hover:bg-blue-100 hover:text-blue-900 cursor-pointer",onClick:c.selectDocument.bind(c,e.document_id),children:[Object(b.jsx)("td",{className:"p-2 hover:font-bold border-b ",children:t+1}),Object(b.jsx)("td",{className:"p-2 hover:font-bold border-b ",children:e.document_code}),Object(b.jsx)("td",{className:"p-2 hover:font-bold border-b ",children:e.owner_name}),Object(b.jsx)("td",{className:"p-2 hover:font-bold border-b ",children:e.owner_institute}),Object(b.jsx)("td",{className:"p-2 border-b ",children:void 0===n?"--":n.domain_name}),Object(b.jsx)("td",{className:"p-2 border-b ",children:void 0===s?"--":s.title}),Object(b.jsxs)("td",{className:"p-2 border-b",children:[Object(_.a)(e.registered_date)," -"," ",Object(_.b)(e.registered_date)]})]},e.document_id)}))})]})})]})}}]),c}(d.a.Component),X=Object(l.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})(U)},93:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var n=function(e){switch(e){case"sm":return"p-1 text-sm";case"md":return"p-2 px-4 text-md";case"lg":return"p-3 px-5 text-lg";default:return""}}},94:function(e,t,c){"use strict";c.d(t,"c",(function(){return n})),c.d(t,"a",(function(){return s})),c.d(t,"b",(function(){return r}));var n=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return void 0===t||""===t?e:e.filter((function(e){var n,s=null===c?e:c;for(var r in s)if(n=!1,null!==e[r]&&void 0!==e[r]&&(n=e[r].toString().toLowerCase().indexOf(t.toLowerCase())>-1))break;return n}))},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";if(null===e||void 0===e)return"";var c=new Date(e);return"YYYY/MM/DD"===t?c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+c.getDate():"MM/DD/YYYY"===t?("0"+(c.getMonth()+1)).slice(-2)+"/"+c.getDate()+"/"+c.getFullYear():c.getDate()+"/"+("0"+(c.getMonth()+1)).slice(-2)+"/"+c.getFullYear()},r=function(e){if(null===e||void 0===e)return"";var t=new Date(e);return"".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds())}},95:function(e,t,c){"use strict";c(2);var n=c(24),s=c(1);t.a=function(e){var t=e.close,c=void 0===t?null:t,r=e.children,o=e.backdrop,a=void 0===o||o,i=e.className,d=void 0===i?"":i,l=e.title,u=void 0===l?"":l,m=e.disabled,j=void 0!==m&&m;return Object(s.jsxs)(s.Fragment,{children:[!0===a&&Object(s.jsx)("div",{className:"fixed animate__animated animate__fadeIn animate__faster z-60 top-0 right-0 left-0 bottom-0 bg-black bg-opacity-70"}),Object(s.jsxs)("div",{className:"fixed ".concat(""===d?"w-4/6":d," overflow-auto  rounded-lg modal-component animate__animated animate__zoomIn animate__faster z-60 bg-gray-100 top-0 right-0 left-0 bottom-0"),children:[Object(s.jsxs)("div",{className:"p-3 rounded-t-lg bg-white border-b flex items-center",children:[Object(s.jsx)("h2",{className:"flex-1 font-bold text-lg text-gray-500",children:u}),null!==c&&Object(s.jsx)(n.a,{disabled:j,theme:"danger-light",onClick:c,size:"sm",children:"Fermer"})]}),Object(s.jsx)("div",{className:"overflow-auto",children:r})]})]})}},96:function(e,t,c){"use strict";var n=c(33),s=c(2),r=c(97),o=c(93),a=c(1);t.a=function(e){var t=e.onChange,c=e.value,i=e.error,d=e.label,l=e.placeholder,u=e.type,m=void 0===u?"text":u,j=e.disabled,b=void 0!==j&&j,x=e.name,h=e.Input_className,_=void 0===h?"":h,v=e.Label_className,p=void 0===v?"":v,g=e.InputContainer_className,O=void 0===g?"":g,f=e.MainContainer_className,N=void 0===f?"":f,y=e.size,w=void 0===y?"md":y,k=e.max,C=e.readOnly,S=void 0!==C&&C,D=Object(s.useState)(!1),E=Object(n.a)(D,2),R=E[0],z=E[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"w-full  ".concat(N),children:[""!==d&&Object(a.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(p),children:d}),Object(a.jsxs)("div",{className:"rounded relative ".concat(O),children:[Object(a.jsx)("input",{type:R?"text":m,name:x,placeholder:l,onChange:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(o.a)(w),"\n                ").concat(""!==i?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(_),value:c,disabled:b,maxLength:k,readOnly:S}),"password"===m&&Object(a.jsx)("button",{className:"absolute -ml-11 p-1 mt-0.5 text-blue-700",type:"button",onClick:z.bind(undefined,!R),children:R?Object(a.jsx)(r.a,{className:"text-4xl"}):Object(a.jsx)(r.b,{className:"text-4xl"})}),""!==i&&Object(a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:i})]})]})})}},98:function(e,t,c){"use strict";c(2);var n=function(e){switch(e){case"sm":return"text-lg";case"md":return"text-xl";case"lg":return"text-2xl";case"xl":return"text-3xl";default:return""}},s=function(e){switch(e){case"accent":return"text-accent-800";case"danger":return"text-red-500 dark:text-red-400";case"primary":return"text-primary-800 dark:text-blue-400";case"success":return"text-green-500 dark:text-green-400";case"auto":return"text-black dark:text-white";default:return""}},r=c(1);t.a=function(e){var t=e.children,c=e.theme,o=void 0===c?"default":c,a=e.type,i=void 0===a?"h3":a,d=e.className,l=void 0===d?"":d,u=e.size,m=void 0===u?"xl":u;return"h1"===i?Object(r.jsx)("h1",{className:"\n      ".concat(n(m)," w-full font-bold rounded \n      ").concat(s(o)," \n      ").concat(l),children:t}):"h2"===i||"h3"===i||"h3"===i?Object(r.jsx)("h3",{className:"\n      ".concat(n(m)," w-full font-bold rounded \n      ").concat(s(o)," \n      ").concat(l),children:t}):null}}}]);
//# sourceMappingURL=5.e762fe5b.chunk.js.map