(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[5],{105:function(e,t,c){"use strict";c.r(t),c.d(t,"DocumentsList",(function(){return X}));var n=c(99),s=c(36),r=c(37),a=c(38),o=c(39),i=c(2),d=c.n(i),l=c(17),m=c(6),u=c(5),j=c(33),x=c(1),b=function(e){var t=Object(i.useState)(!0),c=Object(j.a)(t,2),n=c[0],s=c[1],r=Object(i.useState)(null),a=Object(j.a)(r,2),o=a[0],d=a[1];return Object(i.useEffect)((function(){var t;n&&(null===(t=e.file_url)||null!==t.match(/^ *$/)?d({element:"PDF_FILE",msg:"File url is required"}):null!==o&&d(null),s(!1))}),[o,n,e.file_url]),Object(x.jsx)("div",{className:"w-full",children:o?Object(x.jsx)("div",{className:"alert-warning mt-2 mx-14",children:o.msg}):Object(x.jsx)("object",{data:e.file_url,type:"application/pdf",className:e.class_name,onLoad:function(){return e.setLoadingFile(!1)},children:Object(x.jsx)("iframe",{src:e.file_url,className:e.class_name,title:e.frame_title,onLoad:function(){return e.setLoadingFile(!1)},children:Object(x.jsx)("p",{children:"This browser does not support PDF!"})})})})},h=c(7),_=c(34),v=c(24),p=function(e){var t=e.close,c=e.document_code;return Object(x.jsxs)("div",{className:"flex px-2 items-center border-b h-12",children:[Object(x.jsx)("div",{className:"flex-1",children:""!==c&&Object(x.jsxs)("h2",{className:"text-xl",children:[Object(x.jsx)("b",{className:"text-blue-700",children:c})," ",Object(x.jsx)("span",{className:"text-gray-400",children:"D\xe9tails du document"})]})}),Object(x.jsx)("div",{className:"",children:Object(x.jsx)(v.a,{size:"sm",theme:"danger-light",onClick:t,children:"fermer"})})]})},g=c(40),O=function(){return Object(x.jsx)("div",{className:"flex items-center",children:Object(x.jsxs)("div",{className:"mx-auto py-28 text-center",children:[Object(x.jsx)("div",{className:"block mx-auto pb-2",children:Object(x.jsx)(g.a,{textColor:"text-blue-600"})}),Object(x.jsx)("div",{className:"mt-2",children:"Chargement des d\xe9tails du document"})]})})},f=function(){return Object(x.jsx)("div",{className:"text-center text-white h-full flex items-center",children:Object(x.jsxs)("div",{className:"mx-auto",children:[Object(x.jsx)("div",{className:"block mx-auto pb-2 text-white",children:Object(x.jsx)(g.a,{textColor:"white"})}),"Chargement du document..."]})})},N=c(35),y=c(22),w=c(95),k=c(94),C=function(e){var t=e.onChange,c=e.value,n=e.error,s=e.label,r=e.placeholder,a=e.disabled,o=void 0!==a&&a,i=e.name,d=e.Input_className,l=void 0===d?"":d,m=e.Label_className,u=void 0===m?"":m,j=e.InputContainer_className,b=void 0===j?"":j,h=e.MainContainer_className,_=void 0===h?"":h,v=e.size,p=void 0===v?"md":v,g=e.data;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"w-full my-2 ".concat(_),children:[Object(x.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(u),children:s}),Object(x.jsxs)("div",{className:"rounded relative ".concat(b),children:[Object(x.jsx)("select",{name:i,placeholder:r,onChange:t,className:"\n                     w-full text-lg rounded border-2 \n                     ".concat(Object(k.a)(p),"\n                     ").concat(""!==n?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                     px-3 ").concat(l),value:c,disabled:o,children:g.map((function(e,t){return Object(x.jsx)("option",{value:e.value,children:e.title},t)}))}),""!==n&&Object(x.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:n})]})]})})},S=c(41),D=c(16),E=function(e){var t=e.loading,c=(e.id,e.title),n=e.close,s=e.data,r=e.click,a=Object(i.useState)(""),o=Object(j.a)(a,2),d=o[0],l=o[1],m=Object(_.c)(s,d,Object(S.a)({},c,!0));return Object(x.jsxs)("div",{className:" bg-gray-100 shadow-lg border-gray-500 border-2 h-64 rounded-md flex flex-col",children:[Object(x.jsxs)("div",{className:"p-1 bg-white rounded flex items-center",children:[Object(x.jsx)("label",{htmlFor:"search-input-data",children:Object(x.jsx)(D.s,{className:"text-2xl"})}),Object(x.jsx)("input",{type:"search",className:"py-1 px-1 flex-1",placeholder:"Search",value:d,id:"search-input-data",onChange:function(e){return l(e.target.value)}}),!1===t&&Object(x.jsx)("button",{onClick:function(){return n()},className:"px-2 py-0.5 rounded text-sm ml-3 bg-red-200 text-red-800",children:"Cancel"})]}),Object(x.jsx)("div",{className:"flex-1 p-2 overflow-y-auto border-t ",children:!0===t?Object(x.jsxs)("div",{className:"my-4",children:[Object(x.jsx)("div",{className:"mx-auto text-center",children:Object(x.jsx)(g.a,{})}),Object(x.jsx)("p",{className:"text-center text-gray-500",children:"Loading"})]}):Object(x.jsx)(i.Fragment,{children:0===m.length?Object(x.jsx)("section",{className:"p-4 text-center",children:Object(x.jsx)("h2",{className:"text-lg text-gray-400",children:"No results found"})}):m.map((function(e,t){return Object(x.jsx)("button",{onClick:function(){return r(e)},className:"block p-1 border-b w-full text-left border-gray-300 hover:text-white hover:bg-blue-600",type:"button",children:e[c]},t)}))})})]})},R=function(e){var t=e.onClick,c=e.value,n=e.error,s=e.label,r=e.placeholder,a=e.Input_className,o=void 0===a?"":a,i=e.Label_className,d=void 0===i?"":i,l=e.InputContainer_className,m=void 0===l?"":l,u=e.MainContainer_className,j=void 0===u?"":u,b=e.size,h=void 0===b?"md":b;e.max;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"w-full  ".concat(j),children:[""!==s&&Object(x.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(d),children:s}),Object(x.jsxs)("div",{className:"rounded relative ".concat(m),children:[Object(x.jsx)("div",{placeholder:r,onClick:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(k.a)(h),"\n                ").concat(""!==n?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(o),children:c&&c}),""!==n&&Object(x.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:n})]})]})})},z=Object(l.b)((function(e){var t=e.auth;return{basic:e.basic,auth:t}}),{})((function(e){var t=e.close,c=e.domain_id,s=e.priority_id,r=e.basic,a=e.document_id,o=e.auth,d=e.updateRows,l=Object(i.useState)(c),u=Object(j.a)(l,2),b=u[0],h=u[1],_=Object(i.useState)(s),p=Object(j.a)(_,2),g=p[0],O=p[1],f=Object(i.useState)(!1),N=Object(j.a)(f,2),y=N[0],k=N[1],S=Object(i.useState)(!1),D=Object(j.a)(S,2),z=D[0],L=D[1],F=Object(i.useState)({target:null,msg:""}),T=Object(j.a)(F,2),I=T[0],M=T[1],A=r.domains.find((function(e){return e.domain_id===b}));return Object(x.jsx)(w.a,{title:"Add Domain and priority",close:t,children:Object(x.jsx)("form",{onSubmit:function(e){return e.preventDefault(),""===b||null===b||void 0===b?M({target:"domain",msg:"Le domaine est requis"}):""===g||null===g||void 0===g?M({target:"priority",msg:"La cat\xe9gorie est obligatoire"}):void(null!==o.user&&(k(!0),Object(m.k)({document_id:a,domain_id:b,priority_id:g,cecat_view:"1",cecat_id:o.user.user_id},(function(e,c,n){!0===e&&null!==c?(d(c),t()):M({target:"main-failed",msg:n}),k(!1),setTimeout((function(){M({target:null,msg:""})}),3e3)}))))},children:Object(x.jsxs)("div",{className:"p-4",children:[Object(x.jsx)("div",{className:"px-2 py-2",children:!1===z?Object(x.jsx)("div",{className:"",children:Object(x.jsx)(R,{onClick:function(){return L(!0)},value:null===A||void 0===A?void 0:A.domain_name,error:"domain"===I.target?I.msg:"",label:"S\xe9lectionnez le domaine",placeholder:"S\xe9lectionnez le domaine"})}):Object(x.jsx)(E,{click:function(e){h(e.domain_id),L(!1)},close:L.bind(undefined,!1),loading:y,data:[{title:"",value:""}].concat(Object(n.a)(r.domains)),id:"domain_id",title:"domain_name"})}),Object(x.jsxs)("div",{className:"px-2 py-2",children:[Object(x.jsx)(C,{onChange:function(e){return O(e.target.value)},value:g+"",error:"priority"===I.target?I.msg:"",label:"S\xe9lectionnez la priorit\xe9",placeholder:"S\xe9lectionnez la priorit\xe9",name:"",data:[{title:"",value:""}].concat(Object(n.a)(r.priorities.map((function(e){return{title:e.title,value:e.id}})))),disabled:y}),Object(x.jsx)("div",{className:"py-2 text-right",children:Object(x.jsx)(v.a,{loading:y,children:"Mettre \xe0 jour le document"})})]})]})})})})),L=Object(l.b)((function(e){var t=e.auth;return{basic:e.basic,auth:t}}),{})((function(e){var t=e.data,c=e.title,n=e.updateRows,s=e.setError,r=e.confirm,a=e.danger,o=Object(i.useState)(!1),d=Object(j.a)(o,2),l=d[0],u=d[1],b=function(){u(!0),Object(m.k)(t,(function(e,t,c){!0===e&&null!==t?(n(t),s({target:"main-success",msg:c})):s({target:"main-error",msg:c}),u(!1),setTimeout((function(){s({target:null,msg:""})}),3e3)}))};return Object(x.jsx)("div",{className:"my-1.5",children:Object(x.jsx)(v.a,{loading:l,onClick:function(){(void 0===r||window.confirm(r))&&b()},theme:a?"danger-light":"success-light",className:"w-full",children:c})})})),F=function(e){var t=e.close,c=e.user,n=e.comment,s=e.date,r=e.title;return Object(x.jsx)(w.a,{title:r,close:t,children:Object(x.jsxs)("div",{className:"",children:[null!==c&&Object(x.jsxs)("div",{className:"px-3 py-2 border-b flex items-center",children:[Object(x.jsx)("div",{className:"p-1",children:Object(x.jsx)(D.b,{className:"text-6xl text-gray-600"})}),Object(x.jsxs)("div",{className:"flex-1 pl-2",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-400",children:"Des noms: "}),Object(x.jsxs)("b",{className:"font-bold text-lg m-0 ",children:[c.first_name," ",c.middle_name," ",c.last_name]})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"text-gray-400",children:"E-mail: "}),Object(x.jsxs)("b",{className:"font-bold ",children:[" ",c.email]})]})]})]}),Object(x.jsxs)("div",{className:"py-3 px-4",children:[Object(x.jsx)("label",{htmlFor:"",className:"mb-2 text-gray-500",children:"Commenter:"}),Object(x.jsx)("p",{children:n})]}),Object(x.jsxs)("div",{className:"py-2 border-t text-center text-gray-500 bg-white rounded-b-lg",children:["date comment\xe9e: ",Object(x.jsx)("b",{children:Object(_.a)(s)})]})]})})},T=Object(l.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})((function(e){var t=e.auth,c=e.close,n=e.title,s=e.comment,r=e.basic,a=e.access,o=e.domain_name,d=e.comment_key,l=e.date_key,u=e.date,b=e.access_key,h=e.document_id,_=e.user_id_key,p=e.updateRows,g=Object(i.useState)(null===a?"":a),O=Object(j.a)(g,2),f=O[0],y=O[1],k=Object(i.useState)(null===s?"":s),C=Object(j.a)(k,2),E=C[0],R=C[1],z=Object(i.useState)({target:null,msg:""}),L=Object(j.a)(z,2),F=L[0],T=L[1],I=Object(i.useState)(!1),M=Object(j.a)(I,2),A=M[0],P=M[1];Object(i.useEffect)((function(){if(null===a){var e=r.roles.map((function(e){return e.constant}));y(e.toString()),console.log(e.toString())}}),[r.roles,a]);var G=function(e){T({msg:"",target:null}),f.indexOf(e)>=0?y(f.replace(e," ")):y(f+" ".concat(e," "))};return Object(x.jsx)(w.a,{title:n,close:A?function(){}:c,children:Object(x.jsx)("form",{onSubmit:function(e){var c,n;if(e.preventDefault(),""===s)return T({target:"comment",msg:"Le commentaire ne doit pas \xeatre vide"});if(f.length<=1)return T({target:"view-list",msg:"Veuillez s\xe9lectionner un utilisateur qui peut voir votre commentaire"});if(null===t.user)return T({target:"main-error",msg:"Aucun acc\xe8s trouv\xe9"});var r=(n={document_id:h},Object(S.a)(n,d,E),Object(S.a)(n,b,f),Object(S.a)(n,_,null===(c=t.user)||void 0===c?void 0:c.user_id),n);null===u&&null!==l&&(r[l]=(new Date).toISOString()),P(!0),Object(m.k)(r,(function(e,t,c){!0===e&&null!==t?(p(t),T({target:"main-success",msg:"Le commentaire a \xe9t\xe9 mis \xe0 jour avec succ\xe8s"})):T({target:"main-error",msg:c}),P(!1),setTimeout((function(){T({target:null,msg:""})}),3e3)}))},children:Object(x.jsxs)("div",{className:"",children:["main-error"===F.target&&Object(x.jsx)(N.a,{theme:"danger",children:F.msg}),"main-success"===F.target&&Object(x.jsx)(N.a,{theme:"success",children:F.msg}),Object(x.jsxs)("div",{className:"p-2",children:[Object(x.jsx)("label",{htmlFor:"comment-item",className:"mb-2 text-gray-500",children:"Ajouter un commentaire:"}),Object(x.jsx)("textarea",{onChange:function(e){R(e.target.value),T({msg:"",target:null})},value:E,className:"py-3 px-2 w-full rounded border-2 ".concat("comment"===F.target?"border-red-400":""),disabled:A,id:"comment-item",cols:30,rows:5}),"comment"===F.target&&Object(x.jsx)("span",{className:"text-danger text-sm",children:F.msg})]}),Object(x.jsxs)("div",{className:"border-t",children:[Object(x.jsxs)("div",{className:"px-2 text-center pt-3",children:[Object(x.jsx)("h3",{className:"font-bold text-lg",children:"Choisissez qui peut voir votre commentaire"}),Object(x.jsx)("p",{className:"text-sm text-gray-500 pb-1",children:"Cliquez sur l'ic\xf4ne de l'utilisateur pour s\xe9lectionner et d\xe9s\xe9lectionner"}),"view-list"===F.target&&Object(x.jsx)(N.a,{theme:"success",children:F.msg})]}),Object(x.jsx)("div",{className:"p-2 grid grid-cols-2 gap-2",children:r.roles.filter((function(e){var c;return e.constant!==(null===(c=t.selected_access)||void 0===c?void 0:c.constant)})).map((function(e,t){var c=f.indexOf(e.constant)>=0;return Object(x.jsxs)("div",{className:" rounded shadow ".concat(c?" bg-blue-50 text-blue-700 border border-blue-400":"bg-white"," p-0.5 flex items-center cursor-pointer"),onClick:G.bind(undefined,e.constant),children:[Object(x.jsx)("div",{className:"",children:Object(x.jsx)(D.b,{className:"text-3xl opacity-90"})}),Object(x.jsx)("div",{className:"flex-1 pl-2",children:Object(x.jsx)("h4",{className:"font-bold",children:e.role_name})}),Object(x.jsx)("div",{className:"",children:Object(x.jsx)("h6",{className:"opacity-60 text-sm px-2",children:o})}),Object(x.jsx)("div",{className:"pr-1",children:c?Object(x.jsx)(D.c,{className:"text-2xl text-blue-600"}):Object(x.jsx)(D.d,{className:"text-2xl text-gray-600"})})]},t)}))})]}),Object(x.jsx)("div",{className:"p-2 border-t text-right text-gray-500 bg-white rounded-b-lg",children:Object(x.jsx)(v.a,{loading:A,children:"Mettre \xe0 jour le commentaire"})})]})})})})),I=c(52),M=c(100),A=function(e){var t=e.OnClick,c=e.user,n=e.comment,s=e.date,r=e.title;return Object(x.jsxs)("div",{onClick:t,className:"mb-2 border rounded hover:border-4 hover:bg-blue-50 hover:border hover:border-blue-200",children:[Object(x.jsxs)("div",{className:"py-1  flex items-center bg-gray-100 border-b px-2",children:[Object(x.jsx)(M.a,{className:"text-3xl mx-auto text-yellow-500"}),Object(x.jsxs)("div",{className:"text-left flex-1 pl-2",children:[Object(x.jsx)("span",{className:"text-sm text-gray-800",children:r}),c&&Object(x.jsxs)("h6",{className:"text-blue-700 font-bold text-sm -mt-1",children:[null===c||void 0===c?void 0:c.first_name," ",null===c||void 0===c?void 0:c.middle_name," ",null===c||void 0===c?void 0:c.last_name]})]})]}),Object(x.jsx)("p",{className:"p-2",children:n&&n}),Object(x.jsxs)("span",{className:"block text-center p-1 text-gray-700  font-light text-xs",children:[Object(_.a)(s)," - ",Object(_.b)(s)]})]})},P=function(e){Object(a.a)(c,e);var t=Object(o.a)(c);function c(e){var n;return Object(s.a)(this,c),(n=t.call(this,e)).updateRows=function(e){null!==n.state.document&&(n.setState({document:{document:e,users:n.state.document.users,reference_document:n.state.document.reference_document},error:{target:"main-success",msg:"Document updated successfully"}}),n.clearErrors()),n.props.updateRows(e)},n.updateDocument=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(m.k)(Object(u.a)({document_id:n.props.document_id},e),(function(e,c,s){!0===e&&null!==c?null!==n.state.document&&n.setState({document:{users:n.state.document.users,document:c,reference_document:n.state.document.reference_document},error:{target:!0===t?"main-success":null,msg:!0===t?"Document mis \xe0 jour avec succ\xe8s":""}}):n.setState({error:{msg:s,target:"main-error"}})}))},n.clearErrors=function(){return setTimeout((function(){n.setState({error:{target:null,msg:""}})}),3e3)},n.state={loading:!0,loading_document:!0,error:{target:null,msg:""},document:null,open_add_domain_and_priority:!1,governor_comment_open:!1,expert_comment_open:!1,director_comment_open:!1,ministor_open:!1,ministor_comment_open:!1,governor_comment_edit:!1,expert_comment_edit:!1,director_comment_edit:!1,ministor_edit:!1,ministor_comment_edit:!1,open_document_reference:!1},n}return Object(r.a)(c,[{key:"componentDidMount",value:function(){var e=this;Object(m.e)(this.props.document_id,(function(t,c,n){!0===t&&null!==c?(e.setState({loading:!1,document:c}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===I.a.CECAT&&null===c.document.cecat_view_date&&e.updateDocument({cecat_view_date:new Date,cecat_view:"1"}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===I.a.EXPEDITION&&null===c.document.expeditor_view_date&&e.updateDocument({expeditor_view_date:new Date,expeditor_view:"1"}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===I.a.EXPERT&&null===c.document.expert_view_date&&e.updateDocument({expert_view_date:new Date,expert_view:"1"}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===I.a.GOVENEUR&&null===c.document.governor_view_date&&e.updateDocument({governor_view_date:new Date,governor_view:"1"}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===I.a.MINISTOR&&null===c.document.minister_view_date&&e.updateDocument({minister_view_date:new Date,minister_view:"1"}),null!==e.props.auth.selected_access&&e.props.auth.selected_access.constant===I.a.DIRECTOR&&null===c.document.director_view_date&&e.updateDocument({director_view_date:new Date,director_view:"1"})):(e.setState({loading:!1,error:{target:"main-error",msg:n}}),e.clearErrors())}))}},{key:"render",value:function(){var e,t,c,n,s,r,a,o,i,d,l,m,u,j,g,k,C,S,E,R,M,P,G,V,q,U,X,J,$=this,B=this.state.document,H="",K="";null!==B&&(null!==B.document.domain_id&&(H=null===(X=this.props.basic.domains.find((function(e){return e.domain_id===(null===B||void 0===B?void 0:B.document.domain_id)})))||void 0===X?void 0:X.domain_name),null!==B.document.priority_id&&(K=null===(J=this.props.basic.priorities.find((function(e){return e.id+""===(null===B||void 0===B?void 0:B.document.priority_id)+""})))||void 0===J?void 0:J.title));return Object(x.jsxs)(x.Fragment,{children:["main-success"===this.state.error.target&&Object(x.jsx)(N.a,{theme:"success",fixed:!0,children:this.state.error.msg}),"main-error"===this.state.error.target&&Object(x.jsx)(N.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),Object(x.jsxs)("div",{className:"fixed top-0 overflow-auto right-0 left-0 bottom-0 z-50 bg-white animate__animated animate__zoomIn animate__faster",children:[Object(x.jsx)(p,{close:this.props.close,document_code:null===B?"":B.document.document_code}),!0===this.state.loading?Object(x.jsx)(O,{}):Object(x.jsxs)("div",{className:" flex bg-white lg:flex-row-reverse flex-col ",children:[null!==this.state.document&&Object(x.jsxs)("div",{className:"lg:w-2/6  lg:overflow-y-auto height-calculated",children:[null!==this.state.document.document.governor_signed&&1===+this.state.document.document.governor_signed&&Object(x.jsxs)("div",{className:"flex items-center p-1 mt-1 rounded bg-green-500 text-white mx-3",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.e,{className:"text-3xl"})}),Object(x.jsx)("div",{className:"flex-1",children:"Ce document est approuv\xe9 par le gouverneur"})]}),Object(x.jsxs)("div",{className:"p-5 border-b",children:[console.log([{title:"Code du document",value:null===B||void 0===B?void 0:B.document.document_code},{title:"Nom du propri\xe9taire du document",value:null===B||void 0===B?void 0:B.document.owner_name},{title:"E-mail du propri\xe9taire du document",value:null===B||void 0===B?void 0:B.document.owner_email},{title:"T\xe9l\xe9phone du propri\xe9taire du document",value:null===B||void 0===B?void 0:B.document.owner_phone},{title:"Institution",value:null===B||void 0===B?void 0:B.document.owner_institute},{title:"Date d'enregistrement",value:Object(_.a)(null===B||void 0===B?void 0:B.document.registered_date)}]),[{title:"Code du document",value:null===B||void 0===B?void 0:B.document.document_code},{title:"Nom du propri\xe9taire du document",value:null===B||void 0===B?void 0:B.document.owner_name},{title:"E-mail du propri\xe9taire du document",value:null===B||void 0===B?void 0:B.document.owner_email},{title:"T\xe9l\xe9phone du propri\xe9taire du document",value:null===B||void 0===B?void 0:B.document.owner_phone},{title:"Institution",value:null===B||void 0===B?void 0:B.document.owner_institute},{title:"Date d'enregistrement",value:Object(_.a)(null===B||void 0===B?void 0:B.document.registered_date)}].map((function(e,t){var c;return null!==e.value&&void 0!==e.value&&(null===(c=e.value)||void 0===c?void 0:c.length)>=2?Object(x.jsxs)("div",{className:"py-1 border-b border-gray-100 hover:bg-gray-100",children:[Object(x.jsxs)("span",{className:"text-gray-500 block text-sm",children:[e.title,":"]})," ",Object(x.jsx)("b",{children:e.value})]},t):null})),null!==this.state.document.reference_document&&Object(x.jsxs)("button",{className:"p-1 items-center border flex mt-2 w-full rounded bg-blue-100 text-blue-800 hover:bg-blue-200",onClick:function(){return $.setState({open_document_reference:!0})},children:[Object(x.jsx)("div",{className:"pr-1",children:Object(x.jsx)(y.c,{className:"text-4xl"})}),Object(x.jsx)("div",{className:"flex-1 text-left",children:Object(x.jsxs)("p",{children:["Ce document est associ\xe9 \xe0 un autre document"," ",Object(x.jsx)("b",{children:this.state.document.reference_document.document_code})," "]})})]})]}),Object(x.jsxs)("div",{className:"p-5 border-b",children:[H&&Object(x.jsxs)("div",{className:"py-1 border-b border-gray-100 flex items-center group",children:[Object(x.jsxs)("div",{className:"flex-1",children:[Object(x.jsx)("span",{className:"text-gray-500",children:"Domain:"})," ",Object(x.jsx)("b",{children:H})]}),Object(x.jsx)("div",{className:"",children:(null===(e=this.props.auth.selected_access)||void 0===e?void 0:e.constant)===I.a.CECAT&&Object(x.jsx)("button",{className:"text-xs py-1 px-2 group-hover:bg-blue-200 rounded bg-blue-50 text-blue-700",onClick:function(){return $.setState({open_add_domain_and_priority:!0})},children:"Modifier"})})]}),K&&Object(x.jsxs)("div",{className:"py-1 border-gray-100 flex items-center group",children:[Object(x.jsxs)("div",{className:"flex-1",children:[Object(x.jsx)("span",{className:"text-gray-500",children:"Priority:"})," ",Object(x.jsx)("b",{children:K})]}),Object(x.jsx)("div",{className:"",children:(null===(t=this.props.auth.selected_access)||void 0===t?void 0:t.constant)===I.a.CECAT&&Object(x.jsx)("button",{className:"text-xs py-1 px-2 group-hover:bg-blue-200 rounded bg-blue-50 text-blue-700",onClick:function(){return $.setState({open_add_domain_and_priority:!0})},children:"Modifier"})})]}),null!==B&&(null===B.document.domain_id||null===B.document.priority_id)&&Object(x.jsxs)("div",{className:"group my-2 p-2 bg-blue-50 hover:bg-blue-100 border-blue-100 rounded-lg border-2 text-center",children:[Object(x.jsx)(y.f,{className:"text-6xl mx-auto"}),Object(x.jsx)("p",{className:"mt-1 mb-2 font-bold",children:"Ajouter un domaine et une priorit\xe9"}),Object(x.jsx)(v.a,{theme:"accent-light",className:"border-2 border-blue-500 group-hover:bg-blue-600 group-hover:text-white ",size:"sm",onClick:function(){return $.setState({open_add_domain_and_priority:!0})},children:"Mettre \xe0 jour le document"})]})]}),Object(x.jsxs)("div",{className:"border-b p-5",children:[(null!==this.state.document.document.expert_comment||null!==this.state.document.document.director_comment||null!==this.state.document.document.governor_comment||null!==this.state.document.document.minister_comment)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{className:"font-bold",children:"Commentaires"}),Object(x.jsxs)("div",{className:"py-2  grid ",children:[null!==this.state.document.document.governor_comment&&null!==this.state.document.document.governor_comment_access&&this.state.document.document.governor_comment_access.indexOf((null===(c=this.props.auth.selected_access)||void 0===c?void 0:c.constant)+"")>=0&&Object(x.jsx)(A,{OnClick:function(){return $.setState({governor_comment_open:!0})},user:null===B||void 0===B?void 0:B.users.govenor,comment:null===B||void 0===B?void 0:B.document.governor_comment,date:null===B||void 0===B?void 0:B.document.governor_comment_date,title:"Commentaire du gouverneur"}),null!==this.state.document.document.director_comment&&null!==this.state.document.document.director_comment_access&&this.state.document.document.director_comment_access.indexOf((null===(n=this.props.auth.selected_access)||void 0===n?void 0:n.constant)+"")>=0&&Object(x.jsx)(A,{OnClick:function(){return $.setState({director_comment_open:!0})},user:null===B||void 0===B?void 0:B.users.director,comment:null===B||void 0===B?void 0:B.document.director_comment,date:null===B||void 0===B?void 0:B.document.director_comment_date,title:"Commentaire de durecteur"}),null!==this.state.document.document.minister_comment&&null!==this.state.document.document.ministor_comment_access&&this.state.document.document.ministor_comment_access.indexOf((null===(s=this.props.auth.selected_access)||void 0===s?void 0:s.constant)+"")>=0&&Object(x.jsx)(A,{OnClick:function(){return $.setState({ministor_comment_edit:!0})},user:null===B||void 0===B?void 0:B.users.minister,comment:null===B||void 0===B?void 0:B.document.minister_comment,date:null===B||void 0===B?void 0:B.document.ministor_comment_date,title:"Commentaire du ministre"}),null!==this.state.document.document.expert_comment&&null!==this.state.document.document.expert_comment_access&&this.state.document.document.expert_comment_access.indexOf((null===(r=this.props.auth.selected_access)||void 0===r?void 0:r.constant)+"")>=0&&Object(x.jsx)(A,{OnClick:function(){return $.setState({expert_comment_open:!0})},user:null===B||void 0===B?void 0:B.users.expert,comment:null===B||void 0===B?void 0:B.document.expert_comment,date:null===B||void 0===B?void 0:B.document.expert_comment_date,title:"Commentaire d'expert"})]})]}),Object(x.jsxs)("div",{className:"p",children:[(null===(a=this.props.auth.selected_access)||void 0===a?void 0:a.constant)===I.a.GOVENEUR&&Object(x.jsxs)(v.a,{theme:"accent-light",full:!0,onClick:function(){return $.setState({governor_comment_edit:!0})},children:[Object(x.jsx)(D.f,{className:"inline-block pr-2 text-2xl"}),null===this.state.document.document.governor_comment?"Ajoutez votre commentaire (Gouverneur)":"Modifier votre commentaire (Gouverneur)"]}),(null===(o=this.props.auth.selected_access)||void 0===o?void 0:o.constant)===I.a.DIRECTOR&&Object(x.jsxs)(v.a,{theme:"accent-light",full:!0,onClick:function(){return $.setState({director_comment_edit:!0})},children:[Object(x.jsx)(D.f,{className:"inline-block pr-2 text-2xl"}),null===this.state.document.document.governor_comment?"Ajoutez votre commentaire (Directeur)":"Modifier votre commentaire (Directeur)"]}),(null===(i=this.props.auth.selected_access)||void 0===i?void 0:i.constant)===I.a.MINISTOR&&Object(x.jsxs)(v.a,{theme:"accent-light",full:!0,onClick:function(){return $.setState({ministor_comment_edit:!0})},children:[Object(x.jsx)(D.f,{className:"inline-block pr-2 text-2xl"}),null===this.state.document.document.governor_comment?"Ajoutez votre commentaire (Ministre)":"Modifier votre commentaire (Ministre)"]}),(null===(d=this.props.auth.selected_access)||void 0===d?void 0:d.constant)===I.a.EXPERT&&Object(x.jsxs)(v.a,{theme:"accent-light",full:!0,onClick:function(){return $.setState({expert_comment_edit:!0})},children:[Object(x.jsx)(D.f,{className:"inline-block pr-2 text-2xl"}),null===this.state.document.document.governor_comment?"Ajoutez votre commentaire (Expert)":"Modifier votre commentaire (Expert)"]})]})]}),Object(x.jsx)("div",{className:"p-5 border-b",children:Object(x.jsxs)("div",{className:"py-2",children:[(null===(l=this.props.auth.selected_access)||void 0===l?void 0:l.constant)===I.a.CECAT&&Object(x.jsx)(x.Fragment,{children:0===this.state.document.document.director_access?Object(x.jsx)(L,{setError:function(e){return $.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,director_access:"1"},title:"Envoyer le document au directeur"}):null!==(null===(m=this.state.document)||void 0===m||null===(u=m.document)||void 0===u?void 0:u.director_view)?Object(x.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.l,{className:"text-2xl text-green-500"})}),Object(x.jsx)("div",{className:"flex-1",children:"Le directeur a re\xe7u le document"})]}):Object(x.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.k,{className:"text-2xl text-green-500"})}),Object(x.jsx)("div",{className:"flex-1",children:"Le document a \xe9t\xe9 envoy\xe9 au directeur"})]})}),(null===(j=this.props.auth.selected_access)||void 0===j?void 0:j.constant)===I.a.DIRECTOR&&Object(x.jsx)(x.Fragment,{children:0===this.state.document.document.governor_access?Object(x.jsx)(L,{setError:function(e){return $.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,governor_access:"1"},title:"Envoyer le document au gouverneur"}):null!==(null===(g=this.state.document)||void 0===g||null===(k=g.document)||void 0===k?void 0:k.governor_view)?Object(x.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.l,{className:"text-2xl text-green-500"})}),Object(x.jsx)("div",{className:"flex-1",children:"Le gouverneur a re\xe7u le document"})]}):Object(x.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.k,{className:"text-2xl text-green-500"})}),Object(x.jsx)("div",{className:"flex-1",children:"Le document a \xe9t\xe9 envoy\xe9 au gouverneur"})]})}),(null===(C=this.props.auth.selected_access)||void 0===C?void 0:C.constant)===I.a.GOVENEUR&&Object(x.jsxs)(x.Fragment,{children:[0===this.state.document.document.governor_access?Object(x.jsx)(L,{setError:function(e){return $.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,ministor_access:"1"},title:"Envoyer le document au ministre (".concat(H,")")}):null!==(null===(S=this.state.document)||void 0===S||null===(E=S.document)||void 0===E?void 0:E.minister_view)?Object(x.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.l,{className:"text-2xl text-green-500"})}),Object(x.jsx)("div",{className:"flex-1",children:"Le ministre a re\xe7u le document"})]}):Object(x.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.k,{className:"text-2xl text-green-500"})}),Object(x.jsx)("div",{className:"flex-1",children:"Le document a \xe9t\xe9 envoy\xe9 au ministre"})]}),0===this.state.document.document.expert_access?Object(x.jsx)(L,{setError:function(e){return $.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,expert_access:"1"},title:"Envoyer le document aux experts (".concat(H,")")}):null!==(null===(R=this.state.document)||void 0===R||null===(M=R.document)||void 0===M?void 0:M.expeditor_view)?Object(x.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.l,{className:"text-2xl text-green-500"})}),Object(x.jsx)("div",{className:"flex-1",children:"Les experts ont re\xe7u le document"})]}):Object(x.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.k,{className:"text-2xl text-green-500"})}),Object(x.jsx)("div",{className:"flex-1",children:"Le document a \xe9t\xe9 envoy\xe9 aux experts"})]}),0===this.state.document.document.expeditor_access?Object(x.jsx)(L,{setError:function(e){return $.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,expeditor_access:"1"},title:"Envoyer le document aux exp\xe9diteurs "}):null!==(null===(P=this.state.document)||void 0===P||null===(G=P.document)||void 0===G?void 0:G.expeditor_view)?Object(x.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.l,{className:"text-2xl text-green-500"})}),Object(x.jsx)("div",{className:"flex-1",children:"Les exp\xe9diteurs ont re\xe7u le document"})]}):Object(x.jsxs)("div",{className:"p-1 bg-gray-100 flex items-center border-b",children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(D.k,{className:"text-2xl text-green-500"})}),Object(x.jsx)("div",{className:"flex-1",children:"le document a \xe9t\xe9 envoy\xe9 aux exp\xe9diteurs"})]}),(null===(V=this.props.auth.selected_access)||void 0===V?void 0:V.constant)===I.a.GOVENEUR&&null!==this.state.document.document.governor_signed&&1!==+this.state.document.document.governor_signed?Object(x.jsx)(L,{setError:function(e){return $.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,governor_signed:"1"},title:"Approuver le document",confirm:"Voulez-vous vraiment approuver ce document ?"}):Object(x.jsx)("div",{className:"p-2 bg-gray-100 text-green text-center border-b",children:"La lettre est approuv\xe9e par le gouverneur"}),null!==this.state.document.document.to_print&&1!==+this.state.document.document.to_print?Object(x.jsx)(L,{setError:function(e){return $.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,to_print:"1"},title:"Envoyez cette lettre au service d'impression"}):Object(x.jsx)("div",{className:"p-2 rounded border-b bg-gray-100 text-center",children:"la lettre a \xe9t\xe9 envoy\xe9e au service d'impression"}),null!==this.state.document.document.closed&&1!==+this.state.document.document.closed?Object(x.jsx)(L,{setError:function(e){return $.setState({error:e})},updateRows:this.updateRows,data:{document_id:this.state.document.document.document_id,closed:"1"},title:"Fermer le document",danger:!0}):Object(x.jsx)("div",{className:"p-2 text-center text-red-800 bg-red-100 rounded border-b",children:"The letter has been closed"})]})]})}),Object(x.jsxs)("div",{className:"border-b p-5",children:[Object(x.jsx)("h3",{className:"font-bold",children:"Contributrice/Contributeurs"}),Object(x.jsx)("div",{className:"y-2",children:Object(x.jsxs)("table",{className:"w-full border text-sm",children:[Object(x.jsx)("thead",{className:"text-left border",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"p-1 border",children:"R\xf4le"}),Object(x.jsx)("th",{className:"p-1 border",children:"Des noms"}),Object(x.jsx)("th",{className:"p-1 border",children:"Dates et heure"})]})}),Object(x.jsx)("tbody",{children:[{user:this.state.document.users.cecat,role:"CECAT",date:this.state.document.document.cecat_view_date},{user:this.state.document.users.director,role:"Director",date:this.state.document.document.director_view_date},{user:this.state.document.users.expeditor,role:"Expeditor",date:this.state.document.document.expeditor_view_date},{user:this.state.document.users.expert,role:"Expert",date:this.state.document.document.expert_view_date},{user:this.state.document.users.govenor,role:"Govenor",date:this.state.document.document.governor_view_date},{user:this.state.document.users.minister,role:"Ministor",date:this.state.document.document.minister_view_date}].map((function(e,t){return Object(x.jsxs)("tr",{className:"hover:bg-blue-100",children:[Object(x.jsx)("td",{className:"p-1 border",children:e.role}),Object(x.jsx)("td",{className:"p-1 border",children:e.user&&"".concat(e.user.first_name," ").concat(e.user.middle_name," ").concat(e.user.last_name)}),Object(x.jsxs)("td",{className:"p-1 border text-xs",children:[Object(_.a)(e.date)," - ",Object(_.b)(e.date)]})]},t)}))})]})})]})]}),Object(x.jsxs)("div",{className:"flex-1 bg-gray-800",children:[!0===this.state.loading_document&&Object(x.jsx)(f,{}),null!==B&&Object(x.jsx)(b,{file_url:"".concat(h.d,"/").concat(B.document.document_url),class_name:" w-full height-calculated ".concat(!0===this.state.loading_document?"opacity-0":"opacity-100"),frame_title:"D\xe9tails du document",setLoadingFile:function(){return $.setState({loading_document:!1})}})]})]})]}),!0===this.state.open_add_domain_and_priority&&null!==this.state.document&&Object(x.jsx)(z,{close:function(){return $.setState({open_add_domain_and_priority:!1})},domain_id:null===(q=this.state.document)||void 0===q?void 0:q.document.domain_id,priority_id:null===(U=this.state.document)||void 0===U?void 0:U.document.priority_id,updateRows:this.updateRows,document_id:this.state.document.document.document_id}),!0===this.state.governor_comment_open&&null!==B&&B.document.governor_comment&&Object(x.jsx)(F,{close:function(){return $.setState({governor_comment_open:!1})},comment:B.document.governor_comment,date:B.document.governor_comment_date,title:"Commentaire du gouverneur",user:B.users.govenor}),!0===this.state.expert_comment_open&&null!==B&&B.document.governor_comment&&Object(x.jsx)(F,{close:function(){return $.setState({expert_comment_open:!1})},comment:B.document.expert_comment,date:B.document.expert_comment_date,title:"Commentaire de l'expert",user:B.users.expert}),!0===this.state.director_comment_open&&null!==B&&B.document.director_comment&&Object(x.jsx)(F,{close:function(){return $.setState({director_comment_open:!1})},comment:B.document.director_comment,date:B.document.director_comment_date,title:"Commentaire du r\xe9alisateur",user:B.users.director}),!0===this.state.ministor_comment_open&&null!==B&&B.document.minister_comment&&Object(x.jsx)(F,{close:function(){return $.setState({ministor_comment_open:!1})},comment:B.document.minister_comment,date:B.document.ministor_comment_date,title:"Commentaire du ministre",user:B.users.minister}),null!==B&&!0===this.state.governor_comment_edit&&null!==B&&Object(x.jsx)(T,{close:function(){return $.setState({governor_comment_edit:!1})},comment:B.document.governor_comment,title:"Commentaire du gouverneur",access:B.document.governor_comment_access,domain_name:H,comment_key:"governor_comment",access_key:"governor_comment_access",date_key:"governor_comment_date",date:B.document.governor_comment_date,updateRows:this.updateRows,document_id:B.document.document_id,user_id_key:"governor_id"}),null!==B&&!0===this.state.director_comment_edit&&null!==B&&Object(x.jsx)(T,{close:function(){return $.setState({director_comment_edit:!1})},comment:B.document.director_comment,title:"Commentaire du directeur",access:B.document.director_comment_access,domain_name:H,comment_key:"director_comment",access_key:"director_comment_access",date_key:"director_comment_date",date:B.document.director_comment_date,updateRows:this.updateRows,document_id:B.document.document_id,user_id_key:"director_id"}),null!==B&&!0===this.state.ministor_comment_edit&&null!==B&&Object(x.jsx)(T,{close:function(){return $.setState({ministor_comment_edit:!1})},comment:B.document.minister_comment,title:"Ministor du directeur",access:B.document.ministor_comment_access,domain_name:H,comment_key:"minister_comment",access_key:"ministor_comment_access",date_key:"ministor_comment_date",date:B.document.ministor_comment_date,updateRows:this.updateRows,document_id:B.document.document_id,user_id_key:"minister_id"}),null!==B&&!0===this.state.expert_comment_edit&&null!==B&&Object(x.jsx)(T,{close:function(){return $.setState({expert_comment_edit:!1})},comment:B.document.expert_comment,title:"Expert du directeur",access:B.document.expert_comment_access,domain_name:H,comment_key:"expert_comment",access_key:"expert_comment_access",date_key:"expert_comment_date",date:B.document.expert_comment_date,updateRows:this.updateRows,document_id:B.document.document_id,user_id_key:"expert_id"}),!0===this.state.open_document_reference&&null!==this.state.document&&null!==this.state.document.reference_document&&Object(x.jsxs)(w.a,{close:function(){return $.setState({open_document_reference:!1})},title:"Document de r\xe9f\xe9rence",children:[Object(x.jsx)("div",{className:"p-2 grid grid-cols-2 gap-2",children:[{title:"Des noms: ",value:this.state.document.reference_document.owner_name},{title:"Email: ",value:this.state.document.reference_document.owner_email},{title:"R\xe9f\xe9rence: ",value:this.state.document.reference_document.document_reference_code},{title:"Institut: ",value:this.state.document.reference_document.owner_institute},{title:"Date d'enregistrement: ",value:Object(_.a)(this.state.document.reference_document.registered_date)}].map((function(e,t){return console.log({val:e.value}),null===e.value||e.value.length<=2?null:Object(x.jsxs)("div",{className:"p-1 border rounded flex items-center",children:[Object(x.jsx)("label",{className:"text-sm text-gray-600",children:e.title}),Object(x.jsx)("h6",{className:"font-bold pl-2",children:e.value})]},t)}))}),Object(x.jsx)(b,{file_url:"".concat(h.d,"/").concat(this.state.document.reference_document.document_url),class_name:"w-full h-96",frame_title:"D\xe9tails du document",setLoadingFile:function(){}}),Object(x.jsx)("div",{className:"text-right p-2",children:Object(x.jsx)(v.a,{size:"sm",onClick:function(){null!==$.state.document&&null!==$.state.document.reference_document&&$.props.selectDocument($.state.document.reference_document.document_id+"")},children:"Ouvrir le document"})})]})]})}}]),c}(d.a.Component),G=Object(l.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})(P),V=c(98),q=c(96),U=function(e){Object(a.a)(c,e);var t=Object(o.a)(c);function c(e){var n;return Object(s.a)(this,c),(n=t.call(this,e)).clearErrors=function(){return setTimeout((function(){n.setState({error:{target:null,msg:""}})}),3e3)},n.closeModal=function(){return n.setState({selected_document_id:""})},n.updateRows=function(e){n.setState({documents:n.state.documents.map((function(t){return t.document_id===e.document_id?{closed:e.closed,document_code:e.document_code,document_id:e.document_id,document_reference_code:e.document_reference_code,document_url:e.document_url,domain_id:e.domain_id,owner_email:e.owner_email,owner_institute:e.owner_institute,owner_name:e.owner_name,owner_phone:e.owner_phone,priority_id:e.priority_id,registered_by_id:e.registered_by_id,registered_date:e.registered_date,status:e.status}:t}))})},n.selectDocument=function(e){return n.setState({selected_document_id:e})},n.selectDocumentTimer=function(e){console.log({id:e}),n.setState({selected_document_id:""}),setTimeout((function(){n.setState({selected_document_id:e})}),100)},n.state={loading:!1,selected_document_id:"",selected_user_to_role:"",documents:[],error:{target:null,msg:""},selected_category:"",search:"",selected_domain:""},n}return Object(r.a)(c,[{key:"componentDidMount",value:function(){this.getDocuments()}},{key:"getDocuments",value:function(){var e=this;if(null===this.props.auth.selected_access)return this.setState({loading:!1,error:{target:"main-error",msg:"Impossible de trouver le r\xf4le, veuillez r\xe9essayer plus tard"},selected_document_id:""});this.setState({loading:!0,error:{target:null,msg:""}});var t=this.props.auth.selected_access;Object(m.g)(t.constant,t.domain_id,(function(t,c,n){!0===t?e.setState({loading:!1,documents:c}):(e.setState({loading:!1,documents:[],error:{target:"main-error",msg:"\xc9chec du chargement des documents, veuillez r\xe9essayer plus tard"}}),e.clearErrors())}))}},{key:"componentDidUpdate",value:function(e){var t,c;(null===(t=e.auth.selected_access)||void 0===t?void 0:t.user_to_access_id)!==(null===(c=this.props.auth.selected_access)||void 0===c?void 0:c.user_to_access_id)&&this.getDocuments()}},{key:"render",value:function(){var e,t,c=this;if(""!==this.state.selected_document_id)return Object(x.jsx)(G,{document_id:this.state.selected_document_id,close:this.closeModal,updateRows:this.updateRows,selectDocument:this.selectDocumentTimer});var s=this.state.documents;return console.log({Results:s}),""!==this.state.selected_category&&(s=s.filter((function(e){return e.priority_id===c.state.selected_category}))),""!==this.state.selected_domain&&(s=s.filter((function(e){return e.domain_id===c.state.selected_domain}))),s=Object(_.c)(s,this.state.search,{document_code:!0,document_reference_code:!0,owner_email:!0,owner_name:!0,owner_phone:!0}),Object(x.jsxs)(x.Fragment,{children:[" ","main-error"===this.state.error.target&&Object(x.jsx)(N.a,{theme:"danger",fixed:!0,children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(x.jsx)(N.a,{theme:"success",fixed:!0,children:this.state.error.msg}),Object(x.jsx)("div",{className:"container px-1 -mt-5 pt-3 mx-auto",children:Object(x.jsxs)("div",{className:"mt-1 border overflow-hidden border-gray-300 rounded  mx-auto bg-white",children:[Object(x.jsxs)("div",{className:"p-2 flex items-center",children:[Object(x.jsx)("div",{className:"flex-1",children:Object(x.jsx)(V.a,{children:Object(x.jsx)("span",{className:"font-medium",children:"Documents"})})}),Object(x.jsxs)("div",{className:"text-right",children:[Object(x.jsx)("span",{className:"text-sm text-gray-700",children:"Documents totaux:"}),Object(x.jsx)("h2",{className:"font-bold text-xl -mt-2",children:this.state.documents.length})]})]}),Object(x.jsx)("div",{className:"p-1 px-2 bg-gray-100",children:Object(x.jsxs)("div",{className:"flex items-center",children:[Object(x.jsx)("div",{className:"flex-1",children:Object(x.jsx)(q.a,{onChange:function(e){return c.setState({search:e.target.value})},value:this.state.search,error:"",label:"Recherche",size:"sm",placeholder:"Code du document, noms des propri\xe9taires,...",name:"Recherche",type:"search"})}),Object(x.jsx)("div",{className:"mx-2 w-36",children:Object(x.jsx)(C,{onChange:function(e){return c.setState({selected_category:e.target.value})},value:this.state.selected_category,error:"",label:"Priorit\xe9",placeholder:"",name:"",data:[{title:"Toute",value:""}].concat(Object(n.a)(this.props.basic.priorities.map((function(e){return{title:e.title,value:e.id}})))),size:"sm"})}),Object(x.jsx)("div",{className:"w-48",children:null!==this.props.auth.selected_access&&"1"===(null===(e=this.props.auth.selected_access)||void 0===e?void 0:e.domain_id)?Object(x.jsx)("div",{className:"mx-2",children:Object(x.jsx)(C,{onChange:function(e){return c.setState({selected_domain:e.target.value})},value:this.state.selected_domain,error:"",label:"Domaine",placeholder:"",name:"",data:[{title:"Toute",value:""}].concat(Object(n.a)(this.props.basic.domains.map((function(e){return{title:e.domain_name,value:e.domain_id}})))),size:"sm"})}):Object(x.jsx)("div",{className:"mx-2",children:Object(x.jsx)(q.a,{onChange:function(e){},value:(null===(t=this.props.auth.selected_access)||void 0===t?void 0:t.domain_name)+"",error:"",label:"Domaine",size:"sm",placeholder:"Domaine",name:"Domaine",disabled:!0})})}),Object(x.jsx)("div",{className:"px-2 pt-3",children:Object(x.jsx)(v.a,{onClick:function(){return c.getDocuments()},theme:"success-light",children:Object(x.jsx)(D.r,{className:"text-3xl"})})})]})})]})}),Object(x.jsx)("div",{className:"",children:!0===this.state.loading?Object(x.jsx)("div",{className:"py-20 text-center",children:Object(x.jsx)(g.a,{textColor:"text-blue-600"})}):0===s.length?Object(x.jsxs)("div",{className:"  rounded text-center py-20",children:[Object(x.jsx)(D.m,{className:"text-8xl animate__shakeX animate__animated text-gray-400 mx-auto"}),Object(x.jsx)(V.a,{className:"text-gray-400",children:"Aucun document trouv\xe9 trouv\xe9"})]}):Object(x.jsx)("div",{className:"p-2",children:s.map((function(e,t){var n=null===e.domain_id?void 0:c.props.basic.domains.find((function(t){return t.domain_id===e.domain_id})),s=null===e.priority_id?void 0:c.props.basic.priorities.find((function(t){return t.id+""===e.priority_id+""}));return Object(x.jsxs)("div",{className:"hover:bg-blue-100 hover:border-blue-600 divide-y border md:divide-y-0 divide-x-0   lg:divide-x  md:items-center flex flex-col md:flex-row hover:text-blue-900 cursor-pointer container mx-auto bg-white rounded px-2 py-0.5 mb-2",onClick:c.selectDocument.bind(c,e.document_id),children:[Object(x.jsx)("div",{className:"pr-2",children:Object(x.jsx)(y.c,{className:"text-5xl"})}),Object(x.jsxs)("div",{className:"p-2 flex md:flex-col",children:[Object(x.jsx)("label",{className:"text-gray-400 text-sm pr-1",children:"Code:"}),Object(x.jsx)("h4",{className:"-mt-1 font-bold md:text-lg",children:e.document_code})]}),Object(x.jsxs)("div",{className:"p-2 flex-1 ",children:[Object(x.jsx)("label",{className:"text-gray-400 text-sm",children:"Le nom du propri\xe9taire:"}),Object(x.jsx)("h4",{className:"-mt-1 font-bold text-lg",children:e.owner_name})]}),Object(x.jsxs)("div",{className:"p-2 w-40 group flex md:flex-col",children:[Object(x.jsx)("label",{className:"text-gray-400 pr-1 text-sm",children:"Domaine:"}),Object(x.jsx)("h4",{className:"-mt-1 font-bold md:text-lg",children:void 0===n?"--":Object(_.d)(n.domain_name,17)}),void 0!==n&&n.domain_name.length>17&&Object(x.jsx)("h4",{className:"p-1 border absolute bg-white shadow group-hover:block group-hover:opacity-100 rounded -mt-5 opacity-0 ",children:null===n||void 0===n?void 0:n.domain_name})]}),Object(x.jsxs)("div",{className:"p-2 md:px-4 md:w-36 flex md:flex-col",children:[Object(x.jsx)("label",{className:"text-gray-400 pr-1 block text-sm",children:"Priorit\xe9:"}),void 0===s?"--":Object(x.jsx)("span",{children:Object(x.jsx)("span",{className:"px-2 text-center w-auto font-bold text-sm p-0.5 rounded-full bg-blue-200 text-blue-700",children:s.title})})]}),Object(x.jsxs)("div",{className:"p-2 md:w-32 flex flex-col items-start",children:[Object(x.jsxs)("h4",{className:"",children:[Object(x.jsx)(D.i,{className:"inline-block mr-1 text-blue-600"}),Object(_.a)(e.registered_date)]}),Object(x.jsxs)("h4",{className:" pt-1 ",children:[Object(x.jsx)(D.a,{className:"inline-block mr-1 text-blue-600"}),Object(_.b)(e.registered_date)]})]})]},e.document_id)}))})})]})}}]),c}(d.a.Component),X=Object(l.b)((function(e){return{auth:e.auth,basic:e.basic}}),{})(U)},94:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var n=function(e){switch(e){case"sm":return"p-1 text-sm";case"md":return"p-2 px-4 text-md";case"lg":return"p-3 px-5 text-lg";default:return""}}},95:function(e,t,c){"use strict";c(2);var n=c(24),s=c(1);t.a=function(e){var t=e.close,c=void 0===t?null:t,r=e.children,a=e.backdrop,o=void 0===a||a,i=e.className,d=void 0===i?"":i,l=e.title,m=void 0===l?"":l,u=e.disabled,j=void 0!==u&&u;return Object(s.jsxs)(s.Fragment,{children:[!0===o&&Object(s.jsx)("div",{className:"fixed animate__animated animate__fadeIn animate__faster z-60 top-0 right-0 left-0 bottom-0 bg-black bg-opacity-70"}),Object(s.jsxs)("div",{className:"fixed ".concat(""===d?"w-4/6":d," overflow-auto  rounded-lg modal-component animate__animated animate__zoomIn animate__faster z-60 bg-gray-100 top-0 right-0 left-0 bottom-0"),children:[Object(s.jsxs)("div",{className:"p-3 rounded-t-lg bg-white border-b flex items-center",children:[Object(s.jsx)("h2",{className:"flex-1 font-bold text-lg text-gray-500",children:m}),null!==c&&Object(s.jsx)(n.a,{disabled:j,theme:"danger-light",onClick:c,size:"sm",children:"Fermer"})]}),Object(s.jsx)("div",{className:"overflow-auto",children:r})]})]})}},96:function(e,t,c){"use strict";var n=c(33),s=c(2),r=c(97),a=c(94),o=c(1);t.a=function(e){var t=e.onChange,c=e.value,i=e.error,d=e.label,l=e.placeholder,m=e.type,u=void 0===m?"text":m,j=e.disabled,x=void 0!==j&&j,b=e.name,h=e.Input_className,_=void 0===h?"":h,v=e.Label_className,p=void 0===v?"":v,g=e.InputContainer_className,O=void 0===g?"":g,f=e.MainContainer_className,N=void 0===f?"":f,y=e.size,w=void 0===y?"md":y,k=e.max,C=e.readOnly,S=void 0!==C&&C,D=Object(s.useState)(!1),E=Object(n.a)(D,2),R=E[0],z=E[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"w-full  ".concat(N),children:[""!==d&&Object(o.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(p),children:d}),Object(o.jsxs)("div",{className:"rounded relative ".concat(O),children:[Object(o.jsx)("input",{type:R?"text":u,name:b,placeholder:l,onChange:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(a.a)(w),"\n                ").concat(""!==i?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(_),value:c,disabled:x,maxLength:k,readOnly:S}),"password"===u&&Object(o.jsx)("button",{className:"absolute -ml-11 p-1 mt-0.5 text-blue-700",type:"button",onClick:z.bind(undefined,!R),children:R?Object(o.jsx)(r.a,{className:"text-4xl"}):Object(o.jsx)(r.b,{className:"text-4xl"})}),""!==i&&Object(o.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:i})]})]})})}},98:function(e,t,c){"use strict";c(2);var n=function(e){switch(e){case"sm":return"text-lg";case"md":return"text-xl";case"lg":return"text-2xl";case"xl":return"text-3xl";default:return""}},s=function(e){switch(e){case"accent":return"text-accent-800";case"danger":return"text-red-500 dark:text-red-400";case"primary":return"text-primary-800 dark:text-blue-400";case"success":return"text-green-500 dark:text-green-400";case"auto":return"text-black dark:text-white";default:return""}},r=c(1);t.a=function(e){var t=e.children,c=e.theme,a=void 0===c?"default":c,o=e.type,i=void 0===o?"h3":o,d=e.className,l=void 0===d?"":d,m=e.size,u=void 0===m?"xl":m;return"h1"===i?Object(r.jsx)("h1",{className:"\n      ".concat(n(u)," w-full font-bold rounded \n      ").concat(s(a)," \n      ").concat(l),children:t}):"h2"===i||"h3"===i||"h3"===i?Object(r.jsx)("h3",{className:"\n      ".concat(n(u)," w-full font-bold rounded \n      ").concat(s(a)," \n      ").concat(l),children:t}):null}}}]);
//# sourceMappingURL=5.348e997f.chunk.js.map