(this["webpackJsonpreact-redux-typescript-advance"]=this["webpackJsonpreact-redux-typescript-advance"]||[]).push([[4],{102:function(e,t,r){"use strict";r.r(t),r.d(t,"UPLOAD_DOC_MAX_SIZE",(function(){return C})),r.d(t,"UPLOAD_DOC_MAX_SIZE_MB",(function(){return z})),r.d(t,"UPLOAD_DOC_FILE_TYPE_ERROR_MSG",(function(){return D})),r.d(t,"SUPORT_FILE_TYPES",(function(){return F})),r.d(t,"CreateDocument",(function(){return Y}));var a=r(17),s=r(35),n=r(36),c=r(37),l=r(38),i=r(8),o=r.n(i),d=r(10),u=r.n(d),m=r(2),h=r.n(m),b=r(15),j=r(6),x=r(24),g=r(41),p=r(98),f=r(96),O=r(7),v=r(18),_=r(34),N=r(22),w=r(16),y=r(95),S=r(94),k=r(1),C=1048576,z=2,D="Le syst\xe8me n'accepte que les documents pdf",F=["application/pdf"],M=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){Object(j.f)((function(e,t,r){!0===e?n.setState({document_references:t}):n.setState({error:{target:"main-error",msg:r}})}))},n.FC_UploadUserDocumentAPI=Object(a.a)(o.a.mark((function e(){var t,r,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("FC_UploadUserDocumentAPI"),n.setState({loading:!0}),e.prev=2,(a=new FormData).append("phone",n.state.phone),a.append("email",n.state.email),a.append("names",n.state.names),a.append("reference_code",n.state.reference_code),a.append("institution",n.state.institution),a.append("files",n.state.files[0]),n.state.files){e.next=12;break}return e.abrupt("return");case 12:return Object(v.a)(),e.next=15,u.a.post("".concat(O.c,"/document"),a,{onUploadProgress:function(e){var t=+(null===e||void 0===e?void 0:e.loaded)/+e.total*100;n.setState({upload_percentage:t})}});case 15:s=e.sent,console.log({res:s}),n.setState({loading:!1,success:!0,document_code:null===(t=s.data)||void 0===t?void 0:t.document_code,document_id:null===(r=s.data)||void 0===r?void 0:r.document_id}),n.clearForm(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(2),console.log({error:e.t0}),n.setState({loading:!1,error:{target:"main-error",msg:"msg"}});case 25:case"end":return e.stop()}}),e,null,[[2,21]])}))),n.clearForm=function(){n.setState({upload_percentage:0,files:"",loading:!1})},n.submitHandler=function(e){if(e.preventDefault(),n.setState({error:{target:null,msg:""}}),""===n.state.names)return n.setState({error:{target:"names",msg:"Les noms sont obligatoires"}});n.FC_UploadUserDocumentAPI()},n.onFileChange=function(e){if(n.setState({error:{msg:"",target:null},files:""}),null===e.target.files||void 0===e.target.files)return n.setState({error:{msg:"Veuillez s\xe9lectionner un fichier pdf",target:"files"}});var t=e.target.files[0];return F.includes(t.type)?t.size>=C?n.setState({error:{msg:"La taille maximale du fichier est (".concat(z,"MB)"),target:"files"}}):void n.setState({error:{msg:"",target:null},files:e.target.files}):n.setState({error:{msg:D,target:"files"}})},n.state={loading:!1,success:!1,files:"",upload_percentage:0,error:{target:null,msg:""},names:"",email:"",reference_code:"",phone:"",institution:"",document_id:"",document_code:"",document_references:[],loading_reference:!1,open_select_reference:!1,document_search_input:""},n}return Object(n.a)(r,[{key:"render",value:function(){var e,t=this,r=Object(S.c)(this.state.document_references,this.state.document_search_input,{document_code:!0,domain_id:!0,owner_email:!0,owner_institute:!0,owner_name:!0,owner_phone:!0,registered_date:!0});return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(g.a,{className:" flex bg-white shadow",children:["main-error"===this.state.error.target&&Object(k.jsx)(_.a,{theme:"danger",children:this.state.error.msg}),"main-success"===this.state.error.target&&Object(k.jsx)(_.a,{theme:"success",children:this.state.error.msg}),Object(k.jsxs)("div",{className:"p-2 py-2 w-full",children:[!1===this.state.success&&Object(k.jsx)("div",{className:"border-b text-center text-blue-400 pb-3",children:Object(k.jsx)(p.a,{children:Object(k.jsxs)("section",{className:"flex items-center",children:[Object(k.jsx)(N.c,{className:"inline"})," ",Object(k.jsx)("span",{className:"font-light",children:"Enregistrer un nouveau document"})]})})}),Object(k.jsxs)("form",{onSubmit:this.submitHandler,className:"pt-3",children:[!0===this.state.loading||!0===this.state.success?Object(k.jsx)("div",{className:"p-3",children:!0===this.state.success?Object(k.jsxs)("div",{children:[Object(k.jsx)(N.c,{className:"text-8xl mx-auto"}),Object(k.jsx)(p.a,{theme:"primary",size:"md",className:"text-lg text-center",children:"Le document a \xe9t\xe9 enregistr\xe9 avec succ\xe8s"}),Object(k.jsxs)("div",{className:"pt-2 text-lg text-center text-gray-600",children:[Object(k.jsxs)("div",{className:"border mx-auto inline-block px-4 py-2",children:["Code du document: ",Object(k.jsx)("br",{})," ",Object(k.jsx)(p.a,{className:"text-black text-xl",children:this.state.document_code})]}),Object(k.jsxs)("div",{className:"p-1 mt-3 mx-auto items-center",children:[Object(k.jsx)(w.b,{to:"/document-details/".concat(this.state.document_id),children:Object(k.jsx)(x.a,{theme:"default",size:"sm",className:"inline-block mx-1",children:"Afficher les d\xe9tails du document"})}),Object(k.jsx)(x.a,{theme:"accent-light",size:"sm",className:"inline-block mx-1",onClick:function(){return t.setState({success:!1,document_code:"",document_id:"",email:"",error:{target:null,msg:""},files:"",institution:"",loading:!1,names:"",phone:"",reference_code:"",upload_percentage:0})},children:"Ajouter un nouveau document"})]})]})]}):Object(k.jsxs)("div",{className:"flex",children:[Object(k.jsx)(N.c,{className:"text-8xl "}),Object(k.jsxs)("div",{className:"flex-1",children:[Object(k.jsx)(p.a,{size:"md",children:"T\xe9l\xe9chargement du document en cours"}),Object(k.jsx)("p",{children:"Veuillez patienter pendant que le syst\xe8me t\xe9l\xe9charge le document"}),Object(k.jsx)("div",{className:"mt-1 bg-blue-200 p-1 rounded-full",children:Object(k.jsx)("div",{className:"p-2 width-transition bg-blue-600 rounded-full",style:{width:"".concat(this.state.upload_percentage,"%")}})})]})]})}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"py-2 pb-4 grid md:grid-cols-2 w-full gap-8 ",children:[Object(k.jsxs)("div",{className:"",children:[Object(k.jsx)("label",{htmlFor:"form-select-document",className:"text-primary-900 dark:text-primary-100 ",children:"S\xe9lectionnez un document"}),Object(k.jsx)("input",{onChange:this.onFileChange,type:"file",name:"files",id:"form-select-document",className:"input-white w-full inline-block p-1 rounded bg-blue-100  ".concat("files"===(null===(e=this.state.error)||void 0===e?void 0:e.target)?"border-red-500 border-2":"border-blue-500 border-2"),placeholder:"files",disabled:this.state.loading}),"files"===this.state.error.target&&Object(k.jsx)("span",{className:"text-red-500 text-sm",children:this.state.error.msg})]}),Object(k.jsx)("div",{className:"cursor-pointer",onClick:function(){return t.setState({open_select_reference:!0})},children:Object(k.jsx)(f.a,{onChange:function(e){return t.setState({reference_code:e.target.value,error:{target:null,msg:""}})},value:this.state.reference_code,error:"reference"===this.state.error.target?this.state.error.msg:"",className:"cursor-pointer",label:"R\xe9f\xe9rence du code du document",placeholder:"0000/00",name:"",size:"sm",readOnly:!0})})]}),Object(k.jsx)("div",{className:"border-blue-200 border rounded lg:p-3",children:Object(k.jsxs)("div",{className:"py-2 px-4",children:[Object(k.jsx)("div",{className:"",children:Object(k.jsx)(f.a,{onChange:function(e){return t.setState({names:e.target.value,error:{target:null,msg:""}})},value:this.state.names,error:"names"===this.state.error.target?this.state.error.msg:"",label:"Owner names",placeholder:"",name:"",size:"sm"})}),Object(k.jsxs)("div",{className:"lg:pt-6 grid md:grid-cols-2 lg:grid-cols-3 pt-3 w-full gap-2 lg:gap-8 ",children:[Object(k.jsx)("div",{className:"",children:Object(k.jsx)(f.a,{onChange:function(e){return t.setState({email:e.target.value,error:{target:null,msg:""}})},value:this.state.email,error:"reference"===this.state.error.target?this.state.error.msg:"",label:"Email",placeholder:"email@gmail.fr",name:"",size:"sm"})}),Object(k.jsx)("div",{className:"",children:Object(k.jsx)(f.a,{onChange:function(e){return t.setState({phone:e.target.value,error:{target:null,msg:""}})},value:this.state.phone,error:"phone"===this.state.error.target?this.state.error.msg:"",label:"Phone",placeholder:"",name:"",size:"sm"})}),Object(k.jsx)("div",{className:"",children:Object(k.jsx)(f.a,{onChange:function(e){return t.setState({institution:e.target.value,error:{target:null,msg:""}})},value:this.state.institution,error:"institution"===this.state.error.target?this.state.error.msg:"",label:"Institution",placeholder:"",name:"",size:"sm"})})]})]})})]}),Object(k.jsx)("div",{className:"mt-2 text-right",children:!1===this.state.success&&Object(k.jsx)(x.a,{type:"submit",loading:this.state.loading,children:"Cr\xe9er un document"})})]})]})]}),!0===this.state.open_select_reference&&Object(k.jsxs)(y.a,{title:"Choisissez un document de r\xe9f\xe9rence",close:function(){return t.setState({open_select_reference:!1})},children:[Object(k.jsx)("div",{className:"p-1 px-2",children:Object(k.jsx)(f.a,{onChange:function(e){return t.setState({document_search_input:e.target.value})},value:this.state.document_search_input,error:"",label:"",placeholder:"Search a document code",name:"",size:"sm"})}),Object(k.jsx)("div",{className:"p-2"}),Object(k.jsxs)("table",{className:"w-full bg-white",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{className:"text-left text-sm bg-gray-100",children:[Object(k.jsx)("th",{className:"p-2 border",children:"Code"}),Object(k.jsx)("th",{className:"p-2 border",children:"Le nom du propri\xe9taire"}),Object(k.jsx)("th",{className:"p-2 border",children:"Nom de l'institution"}),Object(k.jsx)("th",{className:"p-2 border",children:"Date"}),Object(k.jsx)("th",{className:"p-2 border"})]})}),Object(k.jsx)("tbody",{children:this.state.document_search_input.length<3?Object(k.jsx)("tr",{children:Object(k.jsxs)("td",{className:"py-8 text-center",colSpan:5,children:[Object(k.jsx)("h5",{className:"text-2xl font-bold text-gray-500",children:"Veuillez saisir le code de r\xe9f\xe9rence du document"}),Object(k.jsxs)("p",{className:"text-gray-800",children:["Vous pouvez taper le ",Object(k.jsx)("b",{children:"code-document"}),","," ",Object(k.jsx)("b",{children:"nom du propri\xe9taire du document"}),","," ",Object(k.jsx)("b",{children:"e-mail du propri\xe9taire du document"})]})]})}):0===r.length?Object(k.jsx)("tr",{children:Object(k.jsxs)("td",{className:"py-8 text-center",colSpan:5,children:[Object(k.jsx)("h5",{className:"text-2xl font-bold text-gray-500",children:"Aucun r\xe9sultat trouv\xe9!"}),Object(k.jsx)("p",{className:"text-gray-800",children:"Veuillez bien v\xe9rifier le code du document ou essayer un autre code de document"})]})}):r.map((function(e,r){return Object(k.jsxs)("tr",{className:"group hover:bg-blue-100",children:[Object(k.jsx)("td",{className:"p-2 border",children:e.document_code}),Object(k.jsx)("td",{className:"p-2 border",children:e.owner_name}),Object(k.jsx)("td",{className:"p-2 border",children:e.owner_institute}),Object(k.jsx)("td",{className:"p-2 border",children:Object(S.a)(e.registered_date)}),Object(k.jsx)("td",{className:"p-1 border w-40 text-right opacity-40 group-hover:opacity-100",children:Object(k.jsx)(x.a,{size:"sm",onClick:function(){return t.setState({reference_code:e.document_code,names:""===t.state.names?e.owner_name:t.state.names,email:""===t.state.email?e.owner_email:t.state.email,phone:""===t.state.phone?e.owner_phone:t.state.phone,open_select_reference:!1})},children:"S\xe9lectionnez ce document"})})]},r)}))})]})]})]})}}]),r}(h.a.Component),Y=Object(b.b)((function(e){return{auth:e.auth}}),{})(M)},93:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=function(e){switch(e){case"sm":return"p-1 text-sm";case"md":return"p-2 px-4 text-md";case"lg":return"p-3 px-5 text-lg";default:return""}}},94:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n}));var a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return void 0===t||""===t?e:e.filter((function(e){var a,s=null===r?e:r;for(var n in s)if(a=!1,null!==e[n]&&void 0!==e[n]&&(a=e[n].toString().toLowerCase().indexOf(t.toLowerCase())>-1))break;return a}))},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY";if(null===e||void 0===e)return"";var r=new Date(e);return"YYYY/MM/DD"===t?r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+r.getDate():"MM/DD/YYYY"===t?("0"+(r.getMonth()+1)).slice(-2)+"/"+r.getDate()+"/"+r.getFullYear():r.getDate()+"/"+("0"+(r.getMonth()+1)).slice(-2)+"/"+r.getFullYear()},n=function(e){if(null===e||void 0===e)return"";var t=new Date(e);return"".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds())}},95:function(e,t,r){"use strict";r(2);var a=r(24),s=r(1);t.a=function(e){var t=e.close,r=void 0===t?null:t,n=e.children,c=e.backdrop,l=void 0===c||c,i=e.className,o=void 0===i?"":i,d=e.title,u=void 0===d?"":d,m=e.disabled,h=void 0!==m&&m;return Object(s.jsxs)(s.Fragment,{children:[!0===l&&Object(s.jsx)("div",{className:"fixed animate__animated animate__fadeIn animate__faster z-60 top-0 right-0 left-0 bottom-0 bg-black bg-opacity-70"}),Object(s.jsxs)("div",{className:"fixed ".concat(""===o?"w-4/6":o," overflow-auto  rounded-lg modal-component animate__animated animate__zoomIn animate__faster z-60 bg-gray-100 top-0 right-0 left-0 bottom-0"),children:[Object(s.jsxs)("div",{className:"p-3 rounded-t-lg bg-white border-b flex items-center",children:[Object(s.jsx)("h2",{className:"flex-1 font-bold text-lg text-gray-500",children:u}),null!==r&&Object(s.jsx)(a.a,{disabled:h,theme:"danger-light",onClick:r,size:"sm",children:"Fermer"})]}),Object(s.jsx)("div",{className:"overflow-auto",children:n})]})]})}},96:function(e,t,r){"use strict";var a=r(33),s=r(2),n=r(97),c=r(93),l=r(1);t.a=function(e){var t=e.onChange,r=e.value,i=e.error,o=e.label,d=e.placeholder,u=e.type,m=void 0===u?"text":u,h=e.disabled,b=void 0!==h&&h,j=e.name,x=e.Input_className,g=void 0===x?"":x,p=e.Label_className,f=void 0===p?"":p,O=e.InputContainer_className,v=void 0===O?"":O,_=e.MainContainer_className,N=void 0===_?"":_,w=e.size,y=void 0===w?"md":w,S=e.max,k=e.readOnly,C=void 0!==k&&k,z=Object(s.useState)(!1),D=Object(a.a)(z,2),F=D[0],M=D[1];return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"w-full  ".concat(N),children:[""!==o&&Object(l.jsx)("label",{htmlFor:"login-form-email",className:"text-primary-900 dark:text-primary-100 ".concat(f),children:o}),Object(l.jsxs)("div",{className:"rounded relative ".concat(v),children:[Object(l.jsx)("input",{type:F?"text":m,name:j,placeholder:d,onChange:t,className:"\n                w-full text-lg rounded border-2 \n                ".concat(Object(c.a)(y),"\n                ").concat(""!==i?"border-red-500 dark:text-white bg-red-100 dark:bg-red-900 dark:bg-opacity-30":"border-primary-800 dark:text-white bg-white dark:bg-primary-900 ","\n                px-3 ").concat(g),value:r,disabled:b,maxLength:S,readOnly:C}),"password"===m&&Object(l.jsx)("button",{className:"absolute -ml-11 p-1 mt-0.5 text-blue-700",type:"button",onClick:M.bind(undefined,!F),children:F?Object(l.jsx)(n.a,{className:"text-4xl"}):Object(l.jsx)(n.b,{className:"text-4xl"})}),""!==i&&Object(l.jsx)("p",{className:"text-sm text-red-600 dark:text-red-500",children:i})]})]})})}},98:function(e,t,r){"use strict";r(2);var a=function(e){switch(e){case"sm":return"text-lg";case"md":return"text-xl";case"lg":return"text-2xl";case"xl":return"text-3xl";default:return""}},s=function(e){switch(e){case"accent":return"text-accent-800";case"danger":return"text-red-500 dark:text-red-400";case"primary":return"text-primary-800 dark:text-blue-400";case"success":return"text-green-500 dark:text-green-400";case"auto":return"text-black dark:text-white";default:return""}},n=r(1);t.a=function(e){var t=e.children,r=e.theme,c=void 0===r?"default":r,l=e.type,i=void 0===l?"h3":l,o=e.className,d=void 0===o?"":o,u=e.size,m=void 0===u?"xl":u;return"h1"===i?Object(n.jsx)("h1",{className:"\n      ".concat(a(m)," w-full font-bold rounded \n      ").concat(s(c)," \n      ").concat(d),children:t}):"h2"===i||"h3"===i||"h3"===i?Object(n.jsx)("h3",{className:"\n      ".concat(a(m)," w-full font-bold rounded \n      ").concat(s(c)," \n      ").concat(d),children:t}):null}}}]);
//# sourceMappingURL=4.90336d3f.chunk.js.map